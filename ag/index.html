<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<head>

<title>Perforce Defect Tracking Integration Administrator's Guide</title>

</head>

<body bgcolor="#FFFFFF" text="#000000" link="#000099" vlink="#660066" alink="#FF0000">

<div align="center">

<p><i><a href="http://www.ravenbrook.com/project/p4dti/">Perforce Defect Tracking Integration Project</a></i></p>

<hr />


<h1>Perforce Defect Tracking Integration Administrator's Guide</h1>

<address>
<a href="mailto:rb@ravenbrook.com">Richard Brooksby</a>,
<a href="http://www.ravenbrook.com/">Ravenbrook Limited</a>,
2000-08-10
</address>

</div>


<h2><a id="section-Contents" name="section-Contents">Contents</a></h2>


<ul>

<li><a href="#section-1">1. Introduction</a></li>

<li>

  <a href="#section-2">2. Overview of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a>

  <ul>

  <li><a href="#section-2.1">2.1. Installation, configuration, and maintenance</a></li>

  <li><a href="#section-2.2">2.2. How the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> works</a></li>

  <li><a href="#section-2.3">2.3. Limitations: will the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> work for your organization?</a></li>

  </ul>

</li>

<li>

  <a href="#section-3">3. Prerequisites for installing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a>

  <ul>

  <li><a href="#section-3.1">3.1. Required experience</a></li>

  <li><a href="#section-3.2">3.2. Perforce prerequisites</a></li>

  <li><a href="#section-3.3">3.3. Bugzilla prerequisites</a></li>

  <li><a href="#section-3.4">3.4. User accounts</a></li>

  <li><a href="#section-3.5">3.5. Character sets</a></li>

  </ul>

</li>

<li>

  <a href="#section-4">4. Installing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a>

  <ul>

  <li><a href="#section-4.1">4.1. Upgrading from an earlier version</a></li>

  <li><a href="#section-4.2">4.2. Microsoft Windows installation</a></li>

  <li><a href="#section-4.3">4.3. Linux installation</a></li>

  <li><a href="#section-4.4">4.4. Solaris installation</a></li>

  </ul>

</li>

<li>

  <a href="#section-5">5. Configuring the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, Perforce, and the defect tracker</a>

  <ul>

  <li><a href="#section-5.1">5.1. <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> configuration</a></li>

  <li><a href="#section-5.2">5.2. Perforce configuration</a></li>

  <li><a href="#section-5.3">5.3. Bugzilla configuration</a></li>

  <li><a href="#section-5.4">5.4. Starting and stopping the replicator manually</a></li>

  <li><a href="#section-5.5">5.5. Setting up the replicator to start automatically</a></li>

  <li><a href="#section-5.6">5.6. Advanced configuration</a></li>

  </ul>

</li>

<li>

  <a href="#section-6">6. Migrating your defect tracking data to the integrated system</a>

  <ul>

  <li><a href="#section-6.1">6.1. Migrating from the defect tracker</a></li>

  <li><a href="#section-6.2">6.2. Creating issues in Perforce</a></li>

  <li><a href="#section-6.3">6.3. Migrating to the defect tracker from Perforce jobs</a></li>

  </ul>

</li>

<li>

  <a href="#section-7">7. Testing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a>

  <ul>

  <li><a href="#section-7.1">7.1. Taking a single step</a></li>

  <li><a href="#section-7.2">7.2. Testing your configuration</a></li>

  <li><a href="#section-7.3">7.3. Checking data consistency</a></li>

  </ul>

</li>

<li><a href="#section-8">8. Training and documentation</a></li>

<li>

  <a href="#section-9">9. Maintaining the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a>

  <ul>

  <li> <a href="#section-9.1">9.1. Maintaining the configuration</a> </li>

  <li> <a href="#section-9.2">9.2. Refreshing jobs in Perforce</a> </li>

  </ul>

</li>

<li><a href="#section-10">10. Uninstalling the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a></li>

<li>

  <a href="#section-11">11. Troubleshooting and error messages</a>

  <ul>

  <li><a href="#section-11.1">11.1. Troubleshooting</a></li>

  <li><a href="#section-11.2">11.2. Error messages by identifier</a></li>

  <li><a href="#section-11.3">11.3. Other error messages</a></li>

  </ul>

</li>

<li><a href="#section-A">A. References</a></li>

<li><a href="#section-B">B. Document history</a></li>

<li><a href="#section-C">C. Glossary</a></li>

<li><a href="#section-D">D. Table of commands</a></li>

</ul>


<h2><a id="section-1" name="section-1">1. Introduction</a></h2>

<p>This manual is the Perforce Defect Tracking Integration Administrator's Guide.  It explains how to install, configure, maintain, and administer the Perforce Defect Tracking Integration (<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>).</p>

<p>The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
connects your defect tracking system to Perforce, so that you don't
have to switch between them and enter duplicate information about your
work.  It also links changes made in Perforce with defect tracker
issues, making it easy to find out why a change was made, find the
work that was done to resolve an issue, or generate reports relating
issues to files or codelines.  The P4DTI is intended to allow
integrations with a number of different defect trackers.  The only
defect tracker supported by this release of the P4DTI is Bugzilla.</p>

<p> This document is intended for <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> administrators.  Ordinary users of the defect tracker or Perforce should read the <a href="../ug/index.html"><cite>Perforce Defect Tracking Integration User's Guide</cite></a>.  (For ideas on how to train your users on the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, see <a href="#section-8">section 8, "Training and documentation"</a>.) </p>

<p> This guide does not describe the basics of using the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, Perforce, or the defect tracker.  Read the <a href="../ug/index.html"><cite>Perforce Defect Tracking Integration User's Guide</cite></a> to understand the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> from a user's perspective. </p>


<h2><a id="section-2" name="section-2">2. Overview of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a></h2>

<h3><a id="section-2.1" name="section-2.1">2.1. Installation, configuration, and maintenance</a></h3>

<p>To install and run the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, you must:</p>

<ol>

<li> Get and install the required software (<a href="#section-3">section 3</a>). </li>

<li> Ensure you have met the procedural prerequisites for Perforce and your defect tracker (<a href="#section-3">section 3</a>). </li>

<li> Download and install the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> software (<a href="#section-4">section 4</a>). </li>

<li> Configure the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> software (<a href="#section-5">section 5</a>). </li>

<li> Migrate defect tracking data from your defect tracker to the integrated system (<a href="#section-6">section 6</a>). </li>

<li> Test the installation (<a href="#section-7">section 7</a>). </li>

<li> Train the users (<a href="#section-8">section 8</a>). </li>

<li> Go live (<a href="#section-9">section 9</a>). </li>

<li> Maintain the installation (<a href="#section-9">section 9</a>). </li>

</ol>


<h3><a id="section-2.2" name="section-2.2">2.2. How the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> works</a></h3>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> works by taking over the job tracking system of Perforce and making the defect tracker's records appear as Perforce jobs.  Perforce users can work with jobs more or less as described in the Perforce manuals, and their changes are reflected in the defect tracker. For more information on how Perforce handles jobs, see the <cite><a href="http://www.perforce.com/perforce/doc.072/manuals/p4guide/">Perforce User's Guide</a></cite>. </p>

<p> Perforce has a mechanism for linking jobs to changelists (the <code class="command">p4 fix</code> command), to enable you to record the work done for a particular reason.  The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> makes these links appear in the defect tracker, making it easy to see what was done or is currently being done to resolve a defect. </p>

<p>The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> replicator is a process that copies data between a defect tracker and a Perforce server to keep each one up to date with changes made in the other.  This approach allows developers to do their routine defect resolution work entirely from their Perforce client, without using the defect tracker's interface. It also allows developers to relate their changes to defect tracking issues. </p>

<p><a href="#figure-1">Figure 1</a> shows how the replicator communicates with the defect tracking server and the Perforce server.</p>

<p>The replicator maintains a one-to-one relationship between <dfn>issues</dfn> in the defect tracker's database and <dfn>jobs</dfn> in the Perforce repository. (An <dfn>issue</dfn> is a unit of work that the defect tracker tracks; some examples are bugs, change requests, and enhancement requests.) In other words, each issue has a corresponding job, and vice versa.  The replicator keeps the contents of a configurable set of fields in the defect tracker's issues the same as the contents of the corresponding Perforce job, so that editing one edits the other.</p>

<p>The replicator also copies Perforce's links between jobs and changelists (called "fixes") to the defect tracker's database, and makes them visible in the defect tracker's user interface.  Replication of links from Perforce to the defect tracker makes it possible to track, record, and check a number of things; in particular, it makes it possible to track and record the changes made for each issue, and find out why a change was made in terms of issues. </p>

<p>The replicator polls the defect tracking server and the Perforce server at regular intervals to get a list of recent changes, and attempts to propagate these changes to the other system.  If a defect tracker issue is changed at the same time as the corresponding Perforce job, the replicator sends an e-mail with the overwritten Perforce job data to the following people: </p>

<ul>

<li> The person who changed the job in Perforce. </li>

<li> The owner of the defect tracker issue. </li>

<li> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> administrator. </li>

</ul>

<p>Most defect trackers have an idea of <dfn>workflow</dfn> - a set of rules that control who can do what to which issues.  The replicator enforces the defect tracker's workflow by rejecting changes to jobs in Perforce that are illegal in the defect tracker. When it comes across such a change, it undoes the change and sends an e-mail message to the user.</p>

<p> The defect tracker manages the defect tracker records (and
therefore the job contents), while Perforce manages the changelists.
Neither side controls the "fixes" relationship - the links between jobs and changelists. </p>

<p> <a href="#figure-1">Figure 1</a> shows how the replicator connects to the Perforce and defect tracker servers. </p>


<div align="center">

<p> <a id="figure-1" name="figure-1">Figure 1</a>. The replication architecture </p>

<img src="replication.gif" alt="Diagram of the replication architecture" width="503" height="335" />

</div>


<h3><a id="section-2.3" name="section-2.3">2.3. Limitations: will the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> work for your organization?</a></h3>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
won't work well for every organization.  In particular, it has the
following limitation: </p>

<ul>

  <li><p> If you have automation that makes very frequent changes to
  records in the defect tracker, then users may be unable to edit jobs
  from Perforce. </p>

  <p> (This is because the <abbr title="Perforce Defect Tracking
  Integration">P4DTI</abbr> works by polling the databases every 10
  seconds (by default).  If there are many updates to the defect tracker
  in this period then the data in Perforce will be out of date; any
  attempt to edit out-of-date data is rejected by the <abbr
  title="Perforce Defect Tracking Integration">P4DTI</abbr> because that
  would introduce inconsistencies.) </p></li>

</ul>


<h2><a id="section-3" name="section-3">3. Prerequisites for installing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a></h2>


<h3><a id="section-3.1" name="section-3.1">3.1. Required experience</a></h3>

<p>To administer the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, you must have the following experience: </p>

<ul>

<li> Perforce: You need at least two months of Perforce administration experience, including a working knowledge of Perforce's command line interface. Read both the <cite><a href="http://www.perforce.com/perforce/doc.072/manuals/p4guide/">Perforce User's Guide</a></cite> and the <cite><a href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce System Administrator's Guide</a></cite>. </li>

<li> The Python programming language: You need to know how to use Python to assign values to variables, but you do not need to be an expert Python programmer.  To acquire a basic familiarity with Python, read the Python tutorial at &lt;<a href="http://www.python.org/doc/current/tut/tut.html">http://www.python.org/doc/current/tut/tut.html</a>&gt;. </li>

<li> The defect tracker: You must understand how to administer the defect tracker and how it is configured at your organization, or have someone with that knowledge on hand when installing, configuring, and testing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>. </li>

</ul>


<h3><a id="section-3.2" name="section-3.2">3.2. Perforce prerequisites</a></h3>


<p> Before installing the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr>, you must obtain and install the following
items: </p>

<ol>

<li> Perforce server software of version 2000.2 or later. You can download server and client upgrades from the Perforce FTP server at &lt;<a href="ftp://ftp.perforce.com/pub/perforce/">ftp://ftp.perforce.com/pub/perforce/</a>&gt;. Be sure to read the release notes (available from &lt;<a href="http://www.perforce.com/">http://www.perforce.com/</a>&gt;) before you install. <a href="http://www.perforce.com/perforce/support.html">Contact Perforce technical support</a> if you need help. </li>

<li> Perforce client software of version 2001.1 or later for every <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> user who uses Perforce, and for the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> itself. </li>

<li> Perforce licenses for every defect tracker user who is going to work in Perforce. </li>

<li> A <i>background user license</i> for the replicator.  This is a license for an automatic process, rather than a person.  Perforce provides background licenses free of charge; <a href="http://www.perforce.com/perforce/contact.html">contact Perforce Customer Service</a> to get one. </li>

</ol>


<p> You must also do the following: </p>

<ol>

<li> Back up your Perforce repository.  For instructions, see the <cite><a href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce System Administrator's Guide</a></cite>. </li>

<li> Copy out of Perforce jobs any important information which may be
overwritten.  The <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> ordinarily takes over the Perforce jobs
system entirely, rewriting the jobspec, possibly conflicting with any
existing jobs.  This is configurable: see <a
href="#section-5.2.3">section 5.2.3, "Handle Perforce jobs and
jobspec"</a> for more detauls. </li>

<li> Determine the address and port number of your Perforce server.
You will need this information when you configure the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> in <a
href="#section-5">section 5, "Configuring the <abbr title="Perforce
Defect Tracking Integration">P4DTI</abbr>, Perforce, and the defect
tracker"</a>. </li>

</ol>

<p> It is possible to keep existing issues that are stored in Perforce
jobs.  A procedure called "migration" submits all the Perforce job
data to the defect tracker, so that the issues can be replicated back
to Perforce, and so appear in both systems.  This requires more
experience of Perforce and some Python programming.  See <a
href="../aag/index.html#section-4">section 4,
"Migrating to the defect tracker from Perforce jobs"</a>, of the
<cite><a href="../aag/index.html">Perforce Defect
Tracking Integration Advanced Administrator's Guide</a></cite>. </p>


<div class="bugzilla">

<h3><a id="section-3.3" name="section-3.3">3.3. Bugzilla prerequisites</a></h3>


<p> Before installing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, you must do the following: </p>

<ol>

<li> Back up your Bugzilla database.  For instructions, see the
<cite><a href="http://www.mysql.com/documentation/"> MySQL Reference
Manual</a></cite> (under "Database Backups"; at time of writing this
is section 5.8.1 <a
href="http://dev.mysql.com/doc/refman/4.1/en/Backup.html">and this
direct link to the English documentation for MySQL 4.1
works</a>). </li>

<li> Back up your Bugzilla code. As part of <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation, you must apply a patch to Bugzilla (for details, see <a href="#section-5.3.1">section 5.3.1, "Patching Bugzilla"</a>). A backup of your Bugzilla code is useful if you need to uninstall the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>. </li>

<li> Choose a machine to run the P4DTI replicator.  The replicator can
run on the Perforce server, the Bugzilla server, or another machine.
For best results, the replicator should run on the Bugzilla server.
This allows it to use Bugzilla's scripts to promptly send e-mail to
Bugzilla users when bugs change.</li>

<li> Ensure that you have at least 10 MB of free disk space on the
P4DTI server machine for the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr>, plus space for logs. </li>

<li> Ensure that your users have the same e-mail address in Bugzilla
and in Perforce; see <a href="#section-3.4">section 3.4, "User
accounts"</a>. </li>

<li> Ensure that the <code>Lock_tables_priv</code> MySQL privilege is
granted to the user that the replicator uses to log in to MySQL; this
user is normally the same as the Bugzilla MySQL user (which is
normally <code>bugs</code>) and is specified by
<code>dbms_user</code> in the configuration file.
For details of the MySQL privilege system, see the <cite><a
href="http://www.mysql.com/documentation">MySQL Reference
Manual</a></cite>.  At the time of writing the privilege system is
described in <a
href="http://www.mysql.com/doc/en/Privilege_system.html">5.4. The
MySQL Access Privilege System</a>.  </li>

</ol>

<p>You must also obtain and install the following software: </p>

<table border="1" cellpadding="5" cellspacing="0">

<thead>
<tr valign="top">
<th align="left">Name</th>
<th align="left">Version</th>
<th align="left">Download Location</th>
<th align="left">Notes</th>
</tr>
</thead>

<tbody>
<tr valign="top">

<td>Bugzilla</td>

<td>2.22.2,<br/>
    2.22.7,<br/>
    3.0, or<br/>
    3.0.8.</td>

<td>&lt;<a
href="http://www.bugzilla.org/download.html">http://www.bugzilla.org/download.html</a>&gt;</td>

<td>Use of versions other than 2.22.7 and 3.0.8 is deprecated.  The
Bugzilla data must be stored in MySQL (see below).  Note: If you've
changed your Bugzilla code, see <a href="#section-5.3.1">section
5.3.1, "Patching Bugzilla"</a></td> </tr>

<tr valign="top">

<td>MySQL</td>

<td>4.0.26 to <br/>
    5.1.33.</td>

<td>&lt;<a
href="http://dev.mysql.com/downloads/mysql/5.0.html">http://dev.mysql.com/downloads/mysql/5.0.html</a>&gt;</td>

<td>Use of versions prior to 4.1.1 is deprecated due to poor Unicode support.  Versions 6.x are experimental.</td> </tr>

<tr valign="top">

<td>Python</td>

<td>2.0 or later</td>

<td>&lt;<a
href="http://www.python.org/download/">http://www.python.org/download/</a>&gt;</td>

<td>&nbsp;</td>
</tr>

<tr valign="top">
<td>MySQL-python</td>

<td>1.0.0 to 1.2.2</td>

<td>&lt;<a href="http://sourceforge.net/projects/mysql-python">http://sourceforge.net/projects/mysql-python</a>&gt;</td>

<td>Use of versions prior to 1.2.1 is deprecated, and may cause
problems with non-ASCII text.  Recent versions of the P4DTI have only
been tested with versions 1.2.1 and 1.2.2.<strong> Note: upgrading
your MySQL server may require rebuilding your MySQL-python
module.</strong></td> </tr>

<tr valign="top">
<td>Python Windows extensions</td>

<td>200 or later</td>

<td>&lt;<a
href="http://sourceforge.net/projects/pywin32/">http://sourceforge.net/projects/pywin32/</a>&gt;</td>

<td>On Microsoft Windows only.</td>

</tr>
</tbody>
</table>

</div>


<h3><a id="section-3.4" name="section-3.4">3.4. User accounts</a></h3>

<p> You must ensure that the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> can work out how users in the defect tracker
correspond to users in Perforce, as follows: </p>

<ol>

<li><p> Create a Bugzilla account for every Perforce user.</p></li>

<li><p> Make sure that each user has the same e-mail address in
Bugzilla and in Perforce.  The <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> uses e-mail address to match up users
between the two systems. </p>

<div class="bugzilla"><p> The <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> supports Bugzilla's "emailsuffix" feature
(once you've applied the Bugzilla patch, <a
href="#section-5.3.1">section 5.3.1</a>, and turned on the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> extensions in
Bugzilla, <a href="#section-5.3.3">section 5.3.3</a>), so if you have
"emailsuffix" set to "@company.domain", then the user "joe" in Bugzilla
will match a user in Perforce with the e-mail address
"joe@company.domain". </p></div></li>

</ol>

<p> There are several problems that can occur if the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> can't match
up users properly:
</p>

<ul>

<li> If an unmatched Perforce user changes a job in Perforce, the
change to the job may be disallowed (because the defect tracker
requires that changes be made only by users with the right
privileges). </li>

<li> If a job in Perforce is assigned to an unmatched Perforce user,
the change to the job is disallowed. </li>

<li> If a Bugzilla bug field is set to an unmatched Bugzilla user, the
field is replicated to Perforce as that user's e-mail address (rather
than a Perforce user name). </li>

<li> If two users in Perforce have the same e-mail address then the
<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> chooses
the first one it finds when matching a Bugzilla user.
This choice may be incorrect. </li>

<li> If two users in Bugzilla have the same e-mail address (when
converted to lower case) then the <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> chooses the first one it finds when
matching a Perforce user.  This choice may be incorrect. </li>

</ul>

<p> To help you prevent these problems, each time you start the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> it sends an
e-mail message to the administrator containing a report listing the
unmatched and duplicate users.  An example report is shown in <a
href="#figure-5">figure 5</a>.  Read reports you receive and fix the
problems. </p>


<div align="center">

<p> <a id="figure-5" name="figure-5">Figure 5. Example e-mail sent when
the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
starts.</a></p>

<table border="1" cellpadding="5" cellspacing="0">

<tr><td>
<table border="0" cellpadding="0" cellspacing="0">

<tr valign="top">
<td><a name="para-3.4.1" id="para-3.4.1" href="#note-3.4.1">1</a>&nbsp;</td>
<td>
<pre>Date: Fri, 14 Jun 2002 14:23:43 +0100 (BST)
From: p4dti-replicator0@company.domain
To: P4DTI administrator &lt;p4dti-admin@company.domain&gt;
Subject: (P4DTI-8669)  The P4DTI replicator has started.

(P4DTI-8658) This is an automatically generated e-mail from the
Perforce Defect Tracking Integration replicator 'replicator0'.

(P4DTI-8669) The P4DTI replicator has started.</pre>
</td></tr>

<tr valign="top">
<td><a name="para-3.4.2" id="para-3.4.2" href="#note-3.4.2">2</a>&nbsp;</td>
<td>
<pre>(P4DTI-867X) The following Perforce users do not correspond to defect
tracker users. The correspondence is based on the e-mail addresses in
the defect tracker and Perforce user records.

(P4DTI-5161) It will not be possible to use Perforce to assign bugs to
these users.  Changes to jobs made by these users will be ascribed in
Bugzilla to the replicator user &lt;p4dti-replicator0@company.domain&gt;.

  User  E-mail address
  --------------------
  nb    nb@nb-thrush
  john  john@john-sparrow</pre>
</td></tr>

<tr valign="top">
<td><a name="para-3.4.3" id="para-3.4.3" href="#note-3.4.3">3</a>&nbsp;</td>
<td>
<pre>(P4DTI-8705) The following defect tracker users do not correspond to
Perforce users.  The correspondence is based on the e-mail addresses
in the defect tracker and Perforce user records.

(P4DTI-5150) A user field containing one of these users will be
translated to the user's e-mail address in the corresponding Perforce
job field.

  User              E-mail address
  ---------------------------------------------
  Clark Kent        ckent@company.domain
  John Anderson     janderson@company.domain
  Alfred Street     astreet@company.domain
  Muriel Terrace    mterrace@company.domain
</pre>
</td></tr>

<tr valign="top">
<td><a name="para-3.4.4" id="para-3.4.4" href="#note-3.4.4">4</a>&nbsp;</td>
<td>
<pre>(P4DTI-5365) These Perforce users have duplicate e-mail addresses.
They may have been matched with the wrong Bugzilla user."

  User   E-mail address
  -------------------------
  nickl  ndl@company.domain
  ndl    ndl@company.domain
</pre>
</td></tr>

<tr valign="top">
<td><a name="para-3.4.5" id="para-3.4.5" href="#note-3.4.5">5</a>&nbsp;</td>
<td>
<pre>(P4DTI-5525) These Bugzilla users have duplicate e-mail addresses
(when converted to lower case).  They may have been matched with the
wrong Perforce user.

  User                   E-mail address
  --------------------------------------------------
  System Administrator   root@company.domain
  Enoch Root             Root@company.domain
</pre>
</td></tr>
</table>

</td></tr>
</table>
</div>

<p> Notes on <a href="#figure-5">figure 5</a>: </p>

<ol>

<li><p> <a id="note-3.4.1" name="note-3.4.1"
href="#para-3.4.1">Headers:</a> The e-mail message is addressed to the
<a href="#config-administrator_address"><code
class="source">administrator_address</code></a>, and sent from the <a
href="#config-replicator_address"><code
class="source">replicator_address</code></a>.</p></li>

<li><p> <a id="note-3.4.2" name="note-3.4.2" href="#para-3.4.2">Section
2</a> lists Perforce users that couldn't be matched to a user in the
defect tracker (here Bugzilla).  Here the users haven't set their e-mail
addresses in Perforce: they still have the defaults. </p></li>

<li><p> <a id="note-3.4.3" name="note-3.4.3" href="#para-3.4.3">Section
3</a> lists defect tracker users that couldn't be matched to a user in
Perforce. </p></li>

<li><p> <a id="note-3.4.4" name="note-3.4.4"
href="#para-3.4.4">Section 4</a> lists Perforce users with duplicate
e-mail addresses.  In this case, if a Bugzilla user had the address
&lt;ndl@company.domain&gt; then the <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> may have matched them wrongly.
Give each Perforce user a distinct e-mail address. </p></li>

<li><p> <a id="note-3.4.5" name="note-3.4.5"
href="#para-3.4.5">Section 5</a> lists Bugzilla users with duplicate
e-mail addresses, when converted to lower-case.  Give each Bugzilla
user a distinct, case-insensitive e-mail address.</p></li>

</ol>


<h3><a id="section-3.5" name="section-3.5">3.5. Character sets</a></h3>

<p>The P4DTI tries to read and write all job and defect tracking data
consistently, regardless of the character set.  Internally the P4DTI
handles all text as Unicode.</p>

<p>The P4DTI will automatically use the character set configuration of
MySQL to read and write Bugzilla data.  If Bugzilla uses UTF-8
encoding, all Bugzilla data should be read and written without any
difficulty.  If Bugzilla and MySQL are configured to use some other
encoding, then you should ensure that the data to be replicated from
Perforce can be represented properly in that encoding.</p>

<p>UTF-8 encoding has been the default in Bugzilla since Bugzilla
2.22.  If you are not using UTF-8 encoding, and have non-ASCII text to
replicate, you should consider converting to UTF-8 encoding (Bugzilla
has a script <code class="filename">contrib/recode.pl</code> to assist
with this).</p>

<p>If your Perforce server is Unicode-enabled, the P4DTI will use the
UTF-8 encoding to communicate with Perforce (using the '-C utf8'
switch).</p>

<p><strong>If your Perforce server is not Unicode-enabled:</strong>
the P4DTI will attempt to determine the user locale on the machine on
which it is running, and use the locale-specific encoding to
communicate with Perforce.  You should make sure that the locale on
your P4DTI server is configured appropriately.  <strong>Any characters
replicated from Bugzilla which are not allowed in the encoding will be
replaced by question marks.</strong> If the P4DTI cannot identify the
locale-specified encoding, it will default to the Latin-1
encoding.</p>

<p>For instance, if you have Perforce metadata from Microsoft Windows
machines using the Windows-1252 encoding, you should consider
configuring the locale on your P4DTI server to have the same encoding.
This will ensure that characters encoded in Windows-1252 (such as the
apostrophe character, code 146) will be replicated and displayed
correctly in Bugzilla.  However, note that a few byte values are not
defined characters in some character sets (e.g. Windows-1252 does not
define byte values 129, 141, 143, 144, and 157).  <strong>Any bytes
replicated from Perforce which are not defined in the encoding will be
replaced by the Unicode replacement character U+FFFD.</strong> In the
Latin-1 encoding, all bytes are defined.</p>

<p>When writing data other than to Bugzilla or Perforce (e.g. to an
administrative email message or a log file), the P4DTI uses the UTF-8
encoding.</p>

<h2><a id="section-4" name="section-4">4. Installing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a></h2>

<p> <strong>Note:</strong> You might want to practice installing and configuring the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> using a test Perforce repository and a test defect tracking database before you try it with your real data. A copy of your real Perforce repository would be ideal; for instructions on how to make a copy of your repository, see the <cite><a href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce System Administrator's Guide</a></cite>. </p>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> can be installed on any machine that can communicate with the defect tracker's server and the Perforce server.  To keep administration simple and reduce network traffic, install and run the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> on the same machine as the defect tracker's server.  The rest of this manual assumes that you do this. </p>

<p><strong>Use directory permissions to prevent the P4DTI directory
from being read by other users.  This will prevent users from reading
passwords and any other sensitive information used or accessed by
the P4DTI.</strong></p>


<h3><a id="section-4.1" name="section-4.1">4.1. Upgrading from an earlier version</a></h3>

<p> For instructions on how to upgrade from an earlier version of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, see the <code class="filename">readme.txt</code> file.</p>


<h3><a id="section-4.2" name="section-4.2">4.2. Windows installation</a></h3>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> is distributed as a self-extracting executable called <code class="filename">p4dti-<i><abbr title="Defect Tracker">DT</abbr></i>-<i>RELEASE</i>.exe</code> (where <i><abbr title="Defect Tracker">DT</abbr></i> is the defect tracker, such as "bugzilla", and <i>RELEASE</i> is the release number, such as "2.0.3"). </p>

<p> To install the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, run this executable on the machine where the defect tracker server is installed.  The installer unpacks the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> into <code class="directory">C:\Program&nbsp;Files\P4DTI-<i>RELEASE</i>\</code> by default. </p>


<h3><a id="section-4.3" name="section-4.3">4.3. Linux installation</a></h3>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> is distributed as an <abbr title="Red Hat Package Manager">RPM</abbr> called <code class="filename">p4dti-<i>RELEASE</i>-1.i386.rpm</code> where <i><abbr title="Defect Tracker">DT</abbr></i> is the defect tracker, such as "bugzilla", and <i>RELEASE</i> is the release number, such as "2.0.3").  </p>

<p> To install the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, run the following command as root on the defect tracker server machine: </p>

<blockquote><code class="command">rpm -i p4dti-<i>RELEASE</i>-1.i386.rpm</code></blockquote>

<p> This installs the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> files into <code
class="filename">/opt/p4dti</code> and a startup script in the <code
class="filename">/etc/rc.d/init.d</code> directory. </p>

<p> If you prefer not to use RPMs, you can follow the procedure in <a href="#section-4.4">section 4.4, "Solaris installation"</a>. </p>


<h3><a id="section-4.4" name="section-4.4">4.4. Solaris installation</a></h3>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> is distributed as a gzipped tar file called <code class="filename">p4dti-<i><abbr title="Defect Tracker">DT</abbr></i>-<i>RELEASE</i>.tar.gz</code> (where <i><abbr title="Defect Tracker">DT</abbr></i> is the defect tracker, such as "bugzilla", and <i>RELEASE</i> is the release number, such as "2.0.3").  </p>

<p> To install the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, unpack this tar file on the defect tracker server machine, using the following command: </p>

<blockquote><code class="command">gunzip -c p4dti-<i><abbr title="Defect Tracker">DT</abbr></i>-<i>RELEASE</i>.tar.gz | tar xvf -</code></blockquote>

<p> You must determine where to put the files.  You can put the files wherever you want. </p>


<h2><a id="section-5" name="section-5">5. Configuring the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, Perforce, and the defect tracker</a></h2>

<p> Work through the subsections in the order in which they appear.  <strong>Do <em>not</em> attempt to run the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> until you have reached the end of this section, or you might end up with a non-working installation.</strong> </p>

<p> To configure the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> with Perforce and your defect tracker, you must: </p>

<ol>

<li> Specify the location of servers and the data you want to appear in Perforce (<a href="#section-5.1">section 5.1</a>). </li>

<li> Configure Perforce to accept information from the replicator and, optionally, install triggers to implement access controls (<a href="#section-5.2">section 5.2</a>). </li>

<li> Enable <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> features, such as the ability to view fixes and changelists from the defect tracker user interface (<a href="#section-5.3">section 5.3</a> for Bugzilla). </li>

<li> Start the replicator (<a href="#section-5.4">section 5.4</a>). </li>

<li> Set up the replicator to start automatically when the server machine is rebooted (<a href="#section-5.5">section 5.5</a>). </li>

</ol>


<h3><a id="section-5.1" name="section-5.1">5.1. <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> configuration</a></h3>

<p> To configure the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, you edit definitions of Python variables in the file <code class="filename">config.py</code> in the installation directory. Edit these definitions according to the notes below. All variables in the file must have a value. </p>


<h4><a id="section-5.1.1" name="section-5.1.1">5.1.1. Essential configuration parameters</a></h4>


<h4><a id="config-dt_name" name="config-dt_name"><code class="source">dt_name</code></a></h4>

<p> Description: The name of the defect tracking system you're integrating with. </p>

<p> Example: <code class="source">"Bugzilla"</code> </p>

<p> Past versions of the P4DTI supported integrations with other
defect trackers (e.g. TeamTrack).  Future versions of the P4DTI may
also do so. </p>


<h4> <a id="config-administrator_address" name="config-administrator_address"><code class="source">administrator_address</code></a> </h4>

<p> Description: The e-mail address of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> administrator. </p>

<p> Example: <code class="source">"p4dti-admin@company.domain"</code> </p>

<p> The replicator sends error reports to this address.  If this is
<code class="source">None</code>, then the replicator never sends
e-mail.</p>


<h4> <a id="config-p4_port" name="config-p4_port"><code class="source">p4_port</code></a> </h4>

<p> Description: The address and port of the Perforce server with which the replicator communicates. </p>

<p> Example: <code class="source">"perforce.company.domain:1666"</code> </p>


<h4> <a id="config-p4_user" name="config-p4_user"><code class="source">p4_user</code></a> </h4>

<p> Description: The userid that the replicator uses to log in to the Perforce server. </p>

<p> Example: <code class="source">"p4dti-replicator0"</code> </p>

<p> For information about how the replicator logs in to Perforce, see <a href="#section-5.2">section 5.2, "Perforce configuration"</a>.  If you want to add more replicators later, incorporate the replicator identifier (<a href="#config-rid">rid</a>) into this userid. </p>


<h4> <a id="config-p4_password" name="config-p4_password"><code class="source">p4_password</code></a> </h4>

<p> Description: The password the replicator uses to log in to the Perforce server. If there is no password, specify "" (empty quotes). </p>

<p> Example: <code class="source">""</code> </p>

<p> For information about how the replicator logs in to Perforce, see
<a href="#section-5.2">section 5.2, "Perforce configuration"</a>. </p>

<p><strong>The P4DTI does not have special mechanisms for managing
Perforce "tickets"</strong> (introduced in Perforce 2003.2).  A ticket may be
used here in place of a password, but when the ticket expires the
replicator will stop working.  Administrators may wish to put the
replicator user in a Perforce group with a long timeout.</p>

<h4> <a id="config-replicator_address" name="config-replicator_address"><code class="source">replicator_address</code></a> </h4>

<p> Description: The e-mail address from which the replicator sends e-mail.  This address is used in the "From" field of e-mail that the replicator sends. </p>

<p> Example: <code class="source">"p4dti-replicator0@company.domain"</code> </p>

<p> To make it easier for users to get assistance, make this address an alias for the <a href="#config-administrator_address">administrator e-mail address (<code class="source">administrator_address</code>)</a>. This e-mail address is also used for the replicator's Bugzilla account; see <a href="#section-5.3.2">section 5.3.2, "Creating a Bugzilla user for the replicator"</a>. </p>


<h4> <a id="config-smtp_server" name="config-smtp_server"><code class="source">smtp_server</code></a> </h4>

<p> Description: The address of the SMTP server that the replicator uses to send e-mail. </p>

<p> Example: <code class="source">"smtp.company.domain"</code> </p>

<p> If this is <code class="source">None</code>, then the replicator
never sends e-mail. </p>

<p> If you need to run the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> without being connected to a network (for
example, if you want to set it up on a laptop so that you can give a
demonstration), set <code class="source">smtp_server=None</code> so
that the replicator doesn't try to send e-mail. </p>


<h4> <a id="config-start_date" name="config-start_date"><code class="source">start_date</code></a> </h4>

<p> Description: The starting point in time for replication. </p>

<p> Example: <code class="source">"2002-02-10 00:00:00"</code> </p>

<p> Issues modified after this date are replicated; issues unchanged
after this date are ignored.  Must be a string in the form <code
class="source">"YYYY-MM-DD HH:MM:SS"</code>. </p>


<div class="bugzilla">

<h4><a id="section-5.1.2" name="section-5.1.2">5.1.2. Bugzilla configuration parameters</a></h4>


<h4> <a id="config-closed_state-Bugzilla" name="config-closed_state-Bugzilla"><code class="source">closed_state</code></a> </h4>

<p> Description: The Bugzilla state that maps to the "closed" state in Perforce. Specify <code class="source">None</code> if you want the ordinary state mapping rules to apply. </p>

<p> (Note that you must write <code class="source">None</code>
literally, not the string <code class="source">"None"</code>, which
would mean the state called "None"). </p>

<p> Example: <code class="source">"RESOLVED"</code>. </p>

<p> Mapping the defect tracker state that developers use most often to
the "closed" state in Perforce makes using the <abbr title="Perforce
Defect Tracking Integration">P4DTI</abbr> easier for the developers,
because the Perforce user interfaces make it easier to fix a job to
"closed" than any other state.  If you specify a <code
class="source">closed_state</code> then the "CLOSED" state in Bugzilla
maps to "bugzilla_closed" in Perforce. </p>


<h4><a id="config-replicated_fields-Bugzilla" name="config-replicated_fields-Bugzilla"><code class="source">replicated_fields</code></a></h4>

<p> Description: A list of the names of Bugzilla fields that are
replicated in Perforce.  Do not include the fields "bug_status",
"short_desc", "assigned_to" or "resolution": they are always
replicated anyway (unless included in <a
href="#config-omitted_fields-Bugzilla"><code
class="source">omitted_fields</code></a>).</p>

<p> Example: <code class="source">["longdesc", "priority", "bug_severity", "product"]</code> </p>

<p> For advice on which fields to replicate, see <a
href="#section-5.1.5">section 5.1.5, "Choosing which fields to
replicate"</a>. </p>


<h4><a id="config-omitted_fields-Bugzilla" name="config-omitted_fields-Bugzilla"><code class="source">omitted_fields</code></a></h4>

<p> Description: A list of the names of Bugzilla fields that are not
replicated in Perforce.  The <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> will ordinarily replicate the fields
"bug_status", "short_desc", "assigned_to" and "resolution".  Leave
this list empty if you want all those fields to be replicated.  To
prevent one or more of those fields from being replicated, include
them in this variable.</p>

<p> Example: <code class="source">["resolution"]</code> </p>

<p> For advice on which fields to replicate, see <a
href="#section-5.1.5">section 5.1.5, "Choosing which fields to
replicate"</a>. </p>


<h4><a id="config-field_names-Bugzilla" name="config-field_names-Bugzilla"><code class="source">field_names</code></a></h4>

<p> Description: A list specifying the names to give to Bugzilla
fields when replicating them into Perforce.  The <abbr title="Perforce
Defect Tracking Integration">P4DTI</abbr> will automatically give
names to replicated fields.  You can use this variable to over-ride
that automatic naming.  Each entry in the list is a pair of a Bugzilla
field name and a Perforce field name.</p>

<p> Example: <code class="source">[("assigned_to", "User"), ("status_whiteboard", "Whiteboard")]</code> </p>

<p> For advice on which fields to replicate, see <a
href="#section-5.1.5">section 5.1.5, "Choosing which fields to
replicate"</a>. </p>


<h4> <a id="config-dbms_host" name="config-dbms_host"><code class="source">dbms_host</code></a> </h4>

<p> Description: The host on which the Bugzilla MySQL server is running. </p>

<p> Example: <code class="source">"localhost"</code> </p>

<p> Set this value to <code class="source">"localhost"</code> if the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> and the Bugzilla MySQL server run on the same machine.  </p>


<h4> <a id="config-dbms_port" name="config-dbms_port"><code class="source">dbms_port</code></a> </h4>

<p> Description: The port number on the <a
href="#config-dbms_host">database host (<code
class="source">dbms_host</code>)</a>, on which the Bugzilla MySQL server
listens. </p>

<p> Example: <code class="source">3306</code> </p>

<p> MySQL normally listens on port 3306.  Change this setting only if you have set up MySQL differently.  Note that this parameter is expressed as a number, not as a string. </p>


<h4> <a id="config-dbms_database" name="config-dbms_database"><code class="source">dbms_database</code></a> </h4>

<p> Description: The name of the MySQL database in which Bugzilla stores its data. </p>

<p> Example: <code class="source">"bugs"</code> </p>

<p> Normally set to <code class="source">"bugs"</code> during Bugzilla
installation.  Change this setting only if you have set up Bugzilla
differently. </p>


<h4> <a id="config-dbms_user" name="config-dbms_user"><code class="source">dbms_user</code></a> </h4>

<p> Description: The user name that the replicator uses to log in to MySQL to use the Bugzilla database. </p>

<p> Example: <code class="source">"bugs"</code> </p>

<p> Bugzilla normally logs in to MySQL as user <code class="source">"bugs"</code>.  Change this setting only if you have configured Bugzilla differently, or if you want to set up the replicator to log in as a different user. </p>


<h4> <a id="config-dbms_password" name="config-dbms_password"><code class="source">dbms_password</code></a> </h4>

<p> Description: The password that the replicator uses to log in to MySQL to use the Bugzilla database. </p>

<p> Example: <code class="source">""</code> </p>

<p> The default Bugzilla configuration logs in to MySQL with no
password.  Change this setting if you have configured Bugzilla
differently, or you want to set up the replicator to log in as a
different user and use a password. </p>


<h4> <a id="config-bugzilla_directory" name="config-bugzilla_directory"><code class="source">bugzilla_directory</code></a> </h4>

<p> Description: The directory in which Bugzilla is installed, or
<code class="source">None</code> if you don't want the P4DTI to
generate Bugzilla change e-mail. </p>

<p> Example: <code class="source">"/home/httpd/html/bugzilla"</code> </p>

<p> Bugzilla sends e-mail to its users when it notices that a bug has
been changed.  If the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> is running on the Bugzilla server, it is
able to use Bugzilla's scripts to promptly send e-mail in the same
way.  This configuration parameter allows the <abbr title="Perforce
Defect Tracking Integration">P4DTI</abbr> to locate Bugzilla's
scripts.  Set it to <code class="source">None</code> if the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> is not
running on the Bugzilla server or if you don't want the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> to send
these e-mail messages. </p>

</div>


<h4><a id="section-5.1.3" name="section-5.1.3">5.1.3. Other configuration parameters</a></h4>

<p> These parameters support advanced or rarely-used features.  Most
organizations can leave these parameters at their default values, at
least to start with, and then set them later if necessary. </p>


<h4> <a id="config-changelist_url" name="config-changelist_url"><code class="source">changelist_url</code></a> </h4>

<p> Description: A format string used to build a URL for a changelist.
Specify <code class="source">None</code> if there are no URLs for
changelists. </p>

<p> This is used by the defect tracker to provide a link from a fix to a
web page providing more information about the changelist that fixed the
issue.  <a href="#figure-6">Figure 6</a> shows how this works in
Bugzilla. </p>

<p> The value must be a format string valid for passing to <code
class="source">sprintf()</code>; it must have one <code
class="source">%d</code> format specifier, for which the change number
is substituted.  (Note that because the value gets passed to <code
class="source">sprintf()</code>, you must double other percent signs.)
</p>

<p> In order to use this feature, you must have a web application that
can provide information about changelists.  Applications suitable for
this include: </p>

<ul>

<li><p> <a
href="http://www.perforce.com/perforce/products/p4web.html">P4Web</a>.
To allow any user to follow the link from the defect tracker to P4Web,
you need to run it in "browse mode".  See the <a
href="http://www.perforce.com/perforce/doc.072/manuals/p4web/">P4Web
documentation</a> for details. </p>

<p> For P4Web, set <code class="source">changelist_url</code> to
something like <code
class="source">"http://info.company.domain:8080/%d?ac=10"</code>.</p></li>

<li><p><a
href="http://public.perforce.com:8080/@ra%3Ds@/public/perforce/utils/perfbrowse/">Perfbrowse</a>.
For Perfbrowse, set <code class="source">changelist_url</code> to
something like <code
class="source">"http://info.company.domain/cgi/perfbrowse.cgi?@describe+%d"</code>.
</p></li>

</ul>

<div align="center">

<p> <a id="figure-6" name="figure-6">Figure 6</a>. Effect of <a
href="#config-changelist_url"><code
class="source">changelist_url</code></a> and <a
href="#config-job_url"><code class="source">job_url</code></a> </p>

<img src="changelist_url.gif" alt="Figure showing the effect of the
changelist_url and job_url configuration parameters on the fixes table
in Bugzilla."  width="507" height="324" />

</div>


<h4> <a id="config-job_url" name="config-job_url"><code class="source">job_url</code></a> </h4>

<p> Description: A format string used to build a URL for job descriptions. Specify <code class="source">None</code> if there is no URL for job descriptions. </p>

<p> This is used by the defect tracker to provide a link from an issue
to a web page providing more information about the job that corresponds
to the issue.  <a href="#figure-6">Figure 6</a> shows how this works in
Bugzilla. </p>

<p> Example: <code class="source">"http://info.company.domain/cgi/perfbrowse.cgi?@job+%s"</code> </p>

<p> The string is a format string valid for passing to <code class="source">sprintf()</code>; it must have one <code class="source">%s</code> format specifier, for which the job name is substituted. (Note that because it gets passed to <code class="source">sprintf()</code>, you must double other percent signs.) </p>

<h4> <a id="config-keep_jobspec" name="config-keep_jobspec"><code class="source">keep_jobspec</code></a> </h4>

<p> Description: The <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> will overwrite the existing Perforce
jobspec, unless this is set to 1. </p>

<p> Example: 1</p>

<p> For more information, see <a href="#section-5.2.3">section 5.2.3,
"Handle Perforce jobs and jobspec".</a></p>

<h4> <a id="config-log_file" name="config-log_file"><code class="source">log_file</code></a> </h4>

<p> Description: The name of the replicator's log file.  If <code
class="source">None</code>, messages aren't logged to any file.  (Note
that you must write <code class="source">None</code> literally, not the
string <code class="source">"None"</code>, which would mean the file
called "None"). </p>

<p> Example: <code class="source">"C:\\Program&nbsp;Files\\P4DTI-<i>RELEASE</i>\\p4dti.log"</code> </p>

<p> The replicator generates log messages to record its actions.  These log messages are sent to all of the following locations: </p>

<ul>

  <li> The standard output of the replicator. </li>

  <li> The system log (under UNIX and Linux, if <a href="#config-use_system_log"><code class="source">use_system_log</code></a> is 1). </li>

  <li> The event log (under Microsoft Windows, if <a href="#config-use_windows_event_log"><code class="source">use_windows_event_log</code></a> is 1). </li>

  <li> The file specified by the <code class="source">log_file</code> configuration parameter (unless it's <code class="source">None</code>). </li>

</ul>


<h4> <a id="config-log_level" name="config-log_level"><code class="source">log_level</code></a> </h4>

<p> Description: The minimum priority level of messages to log.
Messages with this priority or a higher priority appear in the
replicator's log.</p>

<p> Example: <code class="source">message.INFO</code> </p>

<p> This parameter must be one of these constants: </p>

<table>

<tr valign="top">

  <td><code class="source">message.ERR</code></td>

  <td>Errors.</td>

</tr>

<tr valign="top">

  <td><code class="source">message.WARNING</code></td>

  <td>Warnings; that is, features of your system that the replicator can work around, but which you should pay attention to.  For example, "Bugzilla configuration parameter 'p4dti' is turned off.  You won't see Perforce fixes in Bugzilla until you turn it on.  See section 5.3.3 of the P4DTI Administrator's Guide.".</td>

</tr>

<tr valign="top">

  <td><code class="source">message.NOTICE</code></td>

  <td>Significant but expected events.  For example, "Job 'bug37' overwritten by issue 37".</td>

</tr>

<tr valign="top">

  <td><code class="source">message.INFO</code></td>

  <td>Informational messages.  For example, "Replicating issue '37' to job 'bug37'."</td>

</tr>

<tr valign="top">

  <td><code class="source">message.DEBUG</code></td>

  <td>Debugging messages.  For example, "Perforce command: 'p4 -G -u p4dti-replicator0 -p perforce:1666 job -o bug37'."</td>

</tr>

</table>


<h4> <a id="config-p4_client_executable" name="config-p4_client_executable"><code class="source">p4_client_executable</code></a> </h4>

<p> Description: The location of the Perforce client executable. </p>

<p> Example: <code class="source">"C:\\Program&nbsp;Files\\Perforce\\p4.exe"</code> </p>

<p> This setting doesn't need to be an absolute path name if the directory is on the replicator user's path.  On Windows this setting might be <code class="source">"C:\\Program&nbsp;Files\\Perforce\\p4.exe"</code>.  On UNIX it might be just <code class="source">"p4"</code>. </p>

<p> The client executable named by this parameter must be of version
2000.2 or later (run the command <code class="command">p4 -V</code> to
check the client version), and it must be the same version as the
Perforce server you are connecting to.  If there's a mismatch between
the Perforce client executable and the Perforce server, then you might
see the error message <a href="#message-Perforce-Error-2">(P4DTI-7087)
Value for field 'Options' must be one of ...</a>. </p>


<h4> <a id="config-p4_config_file" name="config-p4_config_file"><code class="source">p4_config_file</code></a> </h4>

<p>Description: The name of a Perforce client configuration file that
the replicator will attempt to create and use.</p>

<p> Example: <code class="source">"p4config"</code> </p>

<p> If this variable is set, the replicator creates a file with this
name to store the <a href="#config-p4_password">Perforce user
password</a>, and protects that file against reading by other users.
The <code class="source">P4CONFIG</code> environment variable is used
to tell the Perforce client to obtain the password from this file.
The file is overwritten if it already exists. The replicator
must have sufficient file access permissions to create the file. </p>

<p>If this variable is not set, or is set to an empty string, the
Perforce user password is passed to the Perforce client on the command
line.  <strong>Other users of the P4DTI server may be able to read the
password from such a command line using tools such as "ps".</strong></p>


<h4> <a id="config-p4_server_description" name="config-p4_server_description"><code class="source">p4_server_description</code></a> </h4>

<p> Description: A description of the Perforce server.  This might be used by the defect tracker to show which Perforce server an issue is replicated to. </p>

<p> Example: <code class="source">"Hardware development group Perforce server"</code> </p>


<h4> <a id="config-poll_period" name="config-poll_period"><code class="source">poll_period</code></a> </h4>

<p> Description: The period of time between the end of one poll of the
servers and the start of the next, in seconds. </p>

<p> Example: <code class="source">10</code> </p>


<h4> <a id="config-prepare_issue" name="config-prepare_issue"><code
class="source">prepare_issue(issue, job)</code></a> </h4>

<p> Description: A function that prepares a new issue for submission to
the defect tracker by providing values for all the required fields. </p>

<p> See <a href="../aag/index.html#section-3">section 3,
"Allowing users to create issues in Perforce"</a> in the <a
href="../aag/index.html"><cite>Perforce Defect Tracking
Advanced Administrator's Guide</cite></a> for the full details. </p>


<h4> <a id="config-replicate_p" name="config-replicate_p"><code class="source">replicate_p(issue)</code></a> </h4>

<p> Description: A function that selects which issues to start
replicating.  Normally, the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> replicates all issues created or modified
after the <code class="source"><a
href="#config-start_date">start_date</a></code>, but you can modify this
function to further restrict the issues. </p>

<p> See <a href="../aag/index.html#section-2">section 2,
"Select the issues to replicate"</a> in the <a
href="../aag/index.html"><cite>Perforce Defect Tracking
Advanced Administrator's Guide</cite></a> for the full details. </p>


<h4> <a id="config-replicate_job_p" name="config-replicate_job_p"><code class="source">replicate_job_p(job)</code></a> </h4>

<p> Description: A function that selects which jobs in Perforce to
replicate.  Normally, the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> ignores jobs created in Perforce, but you can
provide this function to allow users to create jobs in Perforce and have
them replicated to the defect tracker. </p>

<p> See <a href="../aag/index.html#section-3">section 3,
"Allowing users to create issues in Perforce"</a> in the <a
href="../aag/index.html"><cite>Perforce Defect Tracking
Advanced Administrator's Guide</cite></a> for the full details. </p>


<h4> <a id="config-rid" name="config-rid"><code class="source">rid</code></a> </h4>

<p> Description: The replicator identifier. </p>

<p> Example: <code class="source">"replicator0"</code> </p>

<p> Must be 32 characters or less, start with a letter or underscore, and consist only of letters, numbers, and underscores. </p>

<p> The replicator identifier is used to distinguish between replicators when multiple replicators are being used to replicate issues from a defect tracker to different Perforce servers.  If you have only one replicator, it doesn't matter what you use for the replicator identifier; <code class="source">"replicator0"</code> is a good choice since it allows you to add more replicators later. </p>

<p> If you change the replicator identifier then your currently
replicated defect tracker issues stop being replicated.  The replicator
believes they are being handled by another replicator. </p>


<h4> <a id="config-sid" name="config-sid"><code class="source">sid</code></a> </h4>

<p> Description: The Perforce server identifier. </p>

<p> Example: <code class="source">"perforce0"</code> </p>

<p> Must be 32 characters or less, start with a letter or underscore, and consist only of letters, numbers and underscores. You might want to use the hostname of your Perforce server, if it is stable. </p>


<h4> <a id="config-use_perforce_jobnames" name="config-use_perforce_jobnames"><code class="source">use_perforce_jobnames</code></a> </h4>

<p> Description: Determines whether the replicator uses Perforce-style
jobnames. </p>

<p> If this parameter is 1, the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> lets Perforce choose the names of the jobs it
creates when replicating issues from the defect tracker (so jobs will be
named job000001, job000002 and so on).  This means that the job name
won't match the name of the corresponding issue in the defect
tracker. </p>

<p> If this parameter is 0 (the default), the <abbr title="Perforce
Defect Tracking Integration">P4DTI</abbr> tries to match the defect
tracker's names for the issues it replicates.  <span
class="bugzilla">In the Bugzilla integration, jobs are called bug1,
bug2, and so on.</span>
</p>

<p> Example: <code class="source">1</code> </p>

<p> If you change this setting, the <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> doesn't rename existing jobs, but new
jobs get the style of name you requested. </p>


<h4> <a id="config-use_windows_event_log" name="config-use_windows_event_log"><code class="source">use_windows_event_log</code></a> </h4>

<p>(Windows only)</p>

<p>Description: The replicator logs activity to the Windows event
log if (and only if) this is 1. </p>

<p> Example: <code class="source">1</code> </p>

<p> Regardless of the setting of this parameter, the replicator also
logs activity to to the standard output and to the <a
href="#config-log_file">log file (<code
class="source">log_file</code>)</a>. </p>

<p> The replicator can generate very many log messages.  So if you set
this parameter to 1, either specify "Overwrite events as needed" in the
Windows Event Viewer on the machine running the replicator, or else set
the <a href="#config-log_level"><code
class="source">log_level</code></a> to a restrictive value like <code
class="source">message.LOG_WARNING</code>. </p>


<h4> <a id="config-use_system_log" name="config-use_system_log"><code
class="source">use_system_log</code></a> </h4>

<p>(Unix/Linux only).</p>

<p> Description: The replicator logs activity to the Unix or Linux
system log (syslog) if (and only if) this is 1. </p>

<p> Example: <code class="source">1</code> </p>

<p> Regardless of the setting of this parameter, the replicator also
logs activity to to the standard output and to the <a
href="#config-log_file">log file (<code
class="source">log_file</code>)</a>. </p>


<h4><a id="section-5.1.5" name="section-5.1.5">5.1.5. Choosing which fields to replicate</a></h4>

<p> Choose which fields to replicate by setting the configuration
parameters <a href="#config-replicated_fields-Bugzilla"><code
class="source">replicated_fields</code></a> and <a
href="#config-omitted_fields-Bugzilla"><code
class="source">omitted_fields</code></a>.  Choose what to call these
fields in the Perforce jobspec by setting <a
href="#config-field_names-Bugzilla"><code
class="source">field_names</code></a>.</p>

<p> Here's some advice on which fields to replicate: </p>

<ul>

<li> Replicate any fields that the developers are required to fill in, or they won't be able to use Perforce to do their work. </li>

<li> Replicate any other fields that the developers need to do their work; see the suggestions below.</li>

<li> Don't replicate other fields - the less information developers
need to enter, the better the quality of that information.  Keeping
the number of replicated fields low might mean modifying your
workflows so that unnecessary fields can be omitted.  For example, a
defect tracker might have a <code>FIX_DESCRIPTION</code> field for
developers to explain what they did.  Now that you're running the
<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, you
don't need that field - you can look in the change comments of the
associated changelists to find out what the developer did - so leave
it out. </li>

<li> Note that Perforce has no protections for jobs.  This means that
any user of Perforce can read all fields of all the jobs.  So if you
have confidential information in issues, keep that information out of
Perforce, for example by separating it out into a field that is not
replicated. </li>

</ul>


<div class="bugzilla">

<p> For Bugzilla, you might want to replicate some of the following
fields: </p>

<ul>

<li> "longdesc", so that developers can understand what the problem is. </li>

<li> "bug_severity", so that developers can prioritize their work. </li>

<li> "priority", so that developers can prioritize their work. </li>

<li> "target_milestone", if you use target milestones, so that developers can prioritize their work. </li>

<li> "product", so that developers can categorize their work. </li>

<li> "component", so that developers can categorize their work. </li>

<li> "version", so that developers can categorize their work. </li>

<li> "op_sys", for additional developer information. </li>

<li> "rep_platform", for additional developer information. </li>

<li> "status_whiteboard", for additional developer information. </li>

<li> "keywords", for additional developer information. </li>

</ul>

<p> For Bugzilla, the replicator rejects the following types of
changes from within Perforce: </p>

<ul>

<li> Any changes to the following types of field:

<ul>

<li> Fields that cannot be changed in Bugzilla, such as "creation_ts",
"delta_ts", and "lastdiffed". </li>

<li> Fields that can only be changed in Bugzilla in very restricted ways, such as "groupset", "product", "version", "component", "target_milestone", and "everconfirmed". </li>

<li> Fields that, when changed in Bugzilla, have complex side-effects that the replicator can't sensibly reproduce, such as "votes" and "keywords". </li>

</ul>

</li>

<li> Changes that do anything to the "longdesc" field other than
appending to it. This field can be used for long descriptions of the
bug.  In Bugzilla, users can only add new comments, which appear at
the end of the description.  This restriction is enforced by the P4DTI
so that Perforce users can also only modify this field by appending to
it; any text that they append is replicated to Bugzilla as a new
comment. </li>

<li> Invalid changes to fields that must contain Bugzilla users, such
as "assigned_to", "reporter", and "qacontact". These fields may
contain a Perforce user name, if the Perforce user corresponds to a
Bugzilla user, or a Bugzilla user's e-mail address. The "qacontact"
field may also contain "None".  If a Perforce user changes one of
these fields to some other string, the replicator rejects the
change. </li>

</ul>

<p> The following table shows the translation between Bugzilla fields
and Perforce fields.  If you have modified Bugzilla, your Bugzilla
field names may differ.  To display the set of Bugzilla field names,
type <code class="command">mysqlshow bugs bugs</code> at a shell
prompt.  To change the name of a field in Perforce, set the <a
href="#config-field_names-Bugzilla"><code
class="source">field_names</code></a> parameter.</p>



<div align="center">

<p> <a id="table-2" name="table-2">Table 2</a>. Bugzilla field names </p>

<table border="1" cellspacing="0" cellpadding="5">
  <thead>
  <tr align="left" valign="top">
    <th>Bugzilla Field name</th>
    <th>Name on Bugzilla form</th>
    <th>Default name in Perforce</th>
    <th>Replication policy</th>
  </tr>
  </thead>
  <tr>
    <th align="center" colspan="4">Fields always replicated</th>
  </tr>
  <tr valign="top">
    <td>bug_id</td>
    <td>Bug #</td>
    <td>P4DTI-issue-id</td>
    <td>read only</td>
  </tr>
  <tr>
    <th align="center" colspan="4">Fields replicated unless in <a href="#config-omitted_fields-Bugzilla"><code class="source">omitted_fields</code></a></th>
  </tr>
  <tr valign="top">
    <td>bug_status</td>
    <td>Status</td>
    <td>Status</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>assigned_to</td>
    <td>Assigned To</td>
    <td>Assigned_To</td>
    <td>read/write, user</td>
  </tr>
  <tr valign="top">
    <td>short_desc</td>
    <td>Summary</td>
    <td>Summary</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>resolution</td>
    <td>Resolution</td>
    <td>Resolution</td>
    <td>read/write</td>
  </tr>
  <tr>
    <th align="center" colspan="4">Fields only replicated if in <a href="#config-replicated_fields-Bugzilla"><code class="source">replicated_fields</code></a></th>
  </tr>
  <tr valign="top">
    <td>bug_file_loc</td>
    <td>URL</td>
    <td>URL</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>bug_severity</td>
    <td>Severity</td>
    <td>Severity</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>op_sys</td>
    <td>OS</td>
    <td>OS</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>priority</td>
    <td>Priority</td>
    <td>Priority</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>rep_platform</td>
    <td>Platform</td>
    <td>Platform</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>reporter</td>
    <td>Reporter</td>
    <td>Reporter</td>
    <td>read/write, user</td>
  </tr>
  <tr valign="top">
    <td>qa_contact</td>
    <td>QA Contact</td>
    <td>QA_Contact</td>
    <td>read/write, user or None</td>
  </tr>
  <tr valign="top">
    <td>status_whiteboard</td>
    <td>Status Whiteboard</td>
    <td>StatusWhiteboard</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>reporter_accessible</td>
    <td>Reporter checkbox</td>
    <td>Reporter_accessible</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>cclist_accessible</td>
    <td>CC List checkbox</td>
    <td>CCList_accessible</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>deadline</td>
    <td>Deadline</td>
    <td>Deadline</td>
    <td>read/write</td>
  </tr>
  <tr valign="top">
    <td>longdesc</td>
    <td>Description</td>
    <td>Description</td>
    <td>append only</td>
  </tr>
  <tr valign="top">
    <td>bug_id</td>
    <td>Bug #</td>
    <td>Bug_number</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>creation_ts</td>
    <td>Opened</td>
    <td>Creation_Timestamp</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>delta_ts</td>
    <td>-</td>
    <td>Update_Timestamp</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>product</td>
    <td>Product</td>
    <td>Product</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>version</td>
    <td>Version</td>
    <td>Version</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>component</td>
    <td>Component</td>
    <td>Component</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>target_milestone</td>
    <td>Target Milestone</td>
    <td>TargetMilestone</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>votes</td>
    <td>Votes</td>
    <td>Votes</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>keywords</td>
    <td>Keywords</td>
    <td>Keywords</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>lastdiffed</td>
    <td>-</td>
    <td>LastDiffed</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>everconfirmed</td>
    <td>-</td>
    <td>EverConfirmed</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>alias</td>
    <td>alias</td>
    <td>Alias</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>estimated_time</td>
    <td>Orig. Est.</td>
    <td>EstimatedTime</td>
    <td>read only</td>
  </tr>
  <tr valign="top">
    <td>remaining_time</td>
    <td>Hours Left</td>
    <td>RemainingTime</td>
    <td>read only</td>
  </tr>
</table>

</div>

<p> The following fields are displayed on the Bugzilla bug form but are kept in separate database tables and cannot be replicated: </p>

<ul>

<li> "Cc" </li>
<li> "Attachments" </li>
<li> "Depends on" </li>
<li> "Blocks" </li>

</ul>

</div>

<p> If you need to change the list of replicated fields after you've started using the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, see <a href="#section-9">section 9, "Maintaining the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>"</a>. </p>


<h3><a id="section-5.2" name="section-5.2">5.2. Perforce configuration</a></h3>

<p> To configure Perforce, you must: </p>

<ol>

<li> Create a Perforce user for the replicator (<a href="#section-5.2.1">section 5.2.1</a>). </li>

<li> Install Perforce triggers to enforce workflow (optional; <a href="#section-5.2.2">section 5.2.2</a>). </li>

<li> Handle Perforce jobs and jobspec (<a href="#section-5.2.3">section 5.2.3</a>). </li>

</ol>


<h4><a id="section-5.2.1" name="section-5.2.1">5.2.1. Creating a Perforce user for the replicator</a></h4>

<p> Create a user in Perforce for the replicator; for instructions, see the <cite><a href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce System Administrator's Guide</a></cite>. The replicator user must have the following properties: </p>

<ul>

<li><p> The userid must be the same as the <a
href="#config-p4_user">replicator Perforce userid (<code
class="source">p4_user</code>)</a> that you specified in the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> configuration.
</p></li>

<li><p> The e-mail address must match the <a href="#config-replicator_address">replicator e-mail address (<code class="source">replicator_address</code>)</a>. </p></li>

<li> <p>If you're using the Perforce protections, make the replicator
an 'admin' or 'super' user so that it can set the jobspec.  For
instructions, see the <cite><a
href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce
System Administrator's Guide</a></cite>.  You'll need to add a line
like </p>

<blockquote><code class="command">admin user p4dti-replicator0 * //...</code></blockquote>

<p> to the protections list.  Note: once you have a working jobspec,
this privilege can be dropped.  See also <a
href="#section-5.2.3">section 5.2.3, "Handle Perforce jobs and
jobspec"</a>.</p></li>

</ul>

<p> For information on getting a license from Perforce Software for this extra user, see <a href="#section-3.2">section 3.2, "Perforce prerequisites"</a>. </p>


<h4><a id="section-5.2.2" name="section-5.2.2">5.2.2. Installing Perforce triggers to enforce workflow</a></h4>

<p> You can use the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> in combination with a Perforce <dfn>trigger</dfn> to enforce extra workflow restrictions.  For example, if your organization assigns priorities to issues, you can prevent changes being made to areas of the repository unless they resolve at least one defect of priority 3 or higher. </p>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> comes with an example trigger script that you can adapt for your needs, installed as <code class="filename">example_trigger.py</code> in the default installation directory. </p>

<p> To enforce workflow restrictions, follow these steps: </p>

<ol>

<li> Configure the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> to replicate the defect tracker fields that
you want to check.  For example, you can check that the "priority" or
"severity" is above a certain level, or that a manager has set the
"approval" field.  See the <a href="#config-replicated_fields-Bugzilla"><code
class="source">replicated_fields</code></a> configuration parameter. </li>

<li> Adapt the trigger script for your needs.  You must be able to do a small amount of Python programming to adapt the trigger script.  The example script contains comments to help you. </li>

<li> Install the trigger script. For instructions on installing and managing trigger scripts, see the <cite><a href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce System Administrator's Guide</a></cite>. </li>

</ol>

<h4><a id="section-5.2.3" name="section-5.2.3">5.2.3. Handle Perforce
jobs and jobspec</a></h4>

<p> The <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> ordinarily takes over the Perforce jobs
system entirely, rewriting the jobspec based on the <a
href="#config-replicated_fields-Bugzilla"><code
class="source">replicated_fields</code></a>, <a
href="#config-omitted_fields-Bugzilla"><code
class="source">omitted_fields</code></a>, and <a
href="#config-field_names-Bugzilla"><code
class="source">field_names</code></a> parameters.  The resulting jobspec
will probably conflict with any existing jobs. You can configure the
<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> to
migrate existing jobs to the defect tracker instead, and/or to retain
or modify your existing jobspec.</p>

<p> If you do not have any Perforce jobs, or a jobspec which you wish
to retain, you should skip this section. </p>

<p> If you do have Perforce jobs, but do not wish to retain either the
jobs or your jobspec, you should delete the jobs and skip the rest of
this section.  For instructions on deleting jobs, see the <cite><a
href="http://www.perforce.com/perforce/doc.072/manuals/p4guide/">Perforce
User's Guide</a></cite>.</p>

<p> If you have jobs which you want to keep, you should do one of the
following:</p>

<ul>

<li> "Migrate" them to issues in the defect tracker.  Then the issues
can be replicated back to Perforce, and so appear in both systems.
This requires more experience of Perforce and some Python programming.
See <a href="../aag/index.html#section-4">section 4,
"Migrating to the defect tracker from Perforce jobs"</a>, of the
<cite><a href="../aag/index.html">Perforce Defect
Tracking Integration Advanced Administrator's Guide</a></cite>.</li>

<li> Keep them in Perforce and retain your existing jobspec. See
below.</li>

</ul>

<p> If you want to keep your jobspec (for instance, if you have
existing jobs or tools which depend upon it), you should set the <a
href="#config-keep_jobspec"><code
class="source">keep_jobspec</code></a> option to 1.  That will prevent
the P4DTI from overwriting the jobspec.  However, your jobspec will
probably not support the P4DTI, which requires a number of
P4DTI-specific fields (for instance, <code
class="source">P4DTI-rid</code>).  You should check your jobspec, and
may wish to extend it.  The rest of this section explains how to do
that.</p>

<p>To find out whether your current jobspec will support P4DTI
operation, including replicating the fields which you have specified,
run the command <code class="command">python check_jobspec.py</code>
in the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
installation directory.  A number of warning messages may be
generated, indicating potential problems with particular fields.  For
instance, a field type may be incorrect, or a field may be missing.
If the jobspec cannot support P4DTI operation, these warnings will be
followed by an error message.  For instance, if a field is missing
entirely, or if a field's specification is completely incompatible
with the data which the P4DTI expects to replicate for that field.</p>

<p>Note that <code class="source">check_jobspec.py</code> will
<em>not</em> make any change to your jobspec.</p>

<p>Problems reported by <code class="source">check_jobspec.py</code>
may be fixed manually or with the <code
class="source">extend_jobspec.py</code> script.  To extend your
current jobspec by adding the fields required by the P4DTI, run the
command <code class="command">python extend_jobspec.py</code> in the
<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
installation directory.  Note that this will <em>only</em> add fields
to the jobspec: it will not delete, renumber, or change existing
fields, although it will produce a warning if the specification of a
field may cause replication problems.</p>

<p>To change your current jobspec by adding required fields and also
changing the specification of existing fields to match fields in
Bugzilla, run the command <code class="command">python
extend_jobspec.py --force</code> in the <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> installation directory.  Note that
this will <em>not</em> delete or renumber any jobspec field.</p>

<div class="bugzilla">

<h3><a id="section-5.3" name="section-5.3">5.3. Bugzilla configuration</a></h3>

<p> To configure Bugzilla, you must: </p>

<ol>

<li> Patch Bugzilla (<a href="#section-5.3.1">section 5.3.1</a>). </li>

<li> Create a Bugzilla user for the replicator (<a href="#section-5.3.2">section 5.3.2</a>). </li>

<li> Enable the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> extensions in Bugzilla (<a
href="#section-5.3.3">section 5.3.3</a>). </li>

</ol>


<h4><a id="section-5.3.1" name="section-5.3.1">5.3.1. Patching Bugzilla</a></h4>

<p> You need to make some minor modifications to the Bugzilla code so
that users can see Perforce information on Bugzilla bug forms, and so
that the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> can access the values of Bugzilla
configuration parameters.  These modifications are distributed as
patch files for the supported versions of Bugzilla. </p>

<p> The patch utility distributed with some versions of Solaris can
not handle the form of patch file distributed with the P4DTI.  We
recommend using the GNU patch utility.</p>

<p> Microsoft Windows does not come with a patch utility.  Various
packages of utilities for Microsoft Windows include one.  If you do
not have a patch utility, you can download version 2.5 of GNU patch,
compiled for Windows, from &lt;<a
href="http://www.ravenbrook.com/project/p4dti/import/2001-11-13/UnxUtils/UnxUtils/usr/local/wbin/patch.exe">http://www.ravenbrook.com/project/p4dti/import/2001-11-13/UnxUtils/UnxUtils/usr/local/wbin/patch.exe</a>&gt;.
This is distributed as part of the UnxUtils package under the GNU
General Public License from &lt;<a
href="http://unxutils.sourceforge.net/">http://unxutils.sourceforge.net/</a>&gt;.</p>

<p> If you have modified Bugzilla at your site, you might still be
able to apply the patch successfully.  Changes to the database schema,
the permissions rules, or the workflow rules are likely to cause the
<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> to
malfunction.  You might need to modify the <abbr title="Perforce
Defect Tracking Integration">P4DTI</abbr> if you have changed these
parts of Bugzilla. </p>

<p> The Bugzilla patch changes and adds files as shown in this
 table:</p>

<table border="1" cellspacing="0" cellpadding="5">
<tr>
  <th align="left">Filename</th>
  <th align="left">Versions</th>
  <th align="left">Effect of patch</th>
</tr>

<tr>
  <th align="left">Bugzilla/Config/Core.pm,<br/>
  template/en/default/admin/params/core.html.tmpl</th>
  <td>2.22.2<br/>
      2.22.7,<br/>
      3.0,<br/>
      3.0.8.</td>
</tr>

<tr>
  <th align="left">Bugzilla/Config.pm</th>
  <td>2.22.2,<br/>
      2.22.7,<br/>
      3.0,<br/>
      3.0.8.</td>
</tr>

<tr valign="top">
  <th align="left">Bugzilla/Bug.pm</th>
  <td>All</td>
  <td>Adds Perforce-related method to Bug object.</td>
</tr>

<tr valign="top">
  <th align="left">template/en/extension/<br/>
                   hook/bug/comments.html.tmpl/<br/>
                   aftercomments/p4dti.html.tmpl</th>
  <td>2.22.2,<br/>
      2.22.7</td>
  <td rowspan="2"><b>New file:</b> Adds Perforce section to bug form.</td>
</tr>

<tr valign="top">
  <th align="left">extensions/p4dti/template/en/<br/>
                   hook/bug/comments.html.tmpl/<br/>
                   aftercomments/p4dti.html.tmpl</th>
  <td>3.0,<br/>
      3.0.8.</td>
</tr>

</table>

<p> These changes are small and self-contained. If your changes do not
affect these files or only affect them in minor ways, the patch should
operate correctly.  If the patch program fails because of your Bugzilla
modifications, it might still be possible to introduce the changes by
hand. If you cannot apply the patch, the replicator might still work,
but the extensions listed in <a href="#section-5.3.3">section 5.3.3</a>
will not be available. </p>

<p> To apply the patch, follow these steps: </p>

<ol>

<li> Make a copy of your Bugzilla code so that you can uninstall the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> if necessary. </li>

<li> Go to your Bugzilla installation directory. </li>

<li> Enter the following command:

<blockquote>

  <code class="command">patch -p1 &lt; <i>p4dti-install-dir</i>/bugzilla-<i>bugzilla-version</i>-patch</code>

</blockquote>

(where <i>p4dti-install-dir</i> is your <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> installation directory) and
<i>bugzilla-version</i> is your version of Bugzilla (2.22.2, 2.22.7,
3.0, or 3.0.8).</li>

<li> Check the output of the patch program carefully to ensure it succeeded. </li>

<li> Run Bugzilla's <code class="filename">checksetup.pl</code>
script, to update the current value for the new <code
class="source">p4dti</code> Bugzilla parameter:

<blockquote>

  <code class="command">perl checksetup.pl</code>

</blockquote>

This will generate a lot of output, but should run without errors.</li>

</ol>


<h4><a id="section-5.3.2" name="section-5.3.2">5.3.2. Creating a Bugzilla user for the replicator</a></h4>

<p> You need to create a Bugzilla user for the replicator.  The replicator uses e-mail addresses to work out which Perforce user corresponds to which Bugzilla user.  A Perforce user that does not correspond to a Bugzilla user is translated to the replicator's Bugzilla user, except for user fields (for example, "AssignedTo") in jobs.  The replicator rejects a change when there is no Bugzilla user corresponding to a changed user field. </p>

<p> To create a Bugzilla user for the replicator, follow these steps: </p>

<ol>

<li> In a Web browser, go to &lt;<span class="url">http://<i>your-bugzilla-path</i>/editusers.cgi</span>&gt;. </li>

<li> Log in if prompted. </li>

<li> Click <span class="gui">Submit</span> to display the user list. </li>

<li> At the bottom of the user list, click "<span class="gui">Add a new user</span>". </li>

<li> In the "Login name" field, enter the <a href="#config-replicator_address">replicator e-mail address (<code class="source">replicator_address</code>)</a>. </li>

<li> In the "Real name" field, enter a name like "Perforce defect tracking integration". </li>

<li> Enter a password.  </li>

<li> In the "Disable text" field, enter something like "This user can access Bugzilla only as the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> replicator process" to prevent access through the Bugzilla user interface. </li>

<li> Click <span class="gui">Add</span> to create the user. </li>

</ol>


<h4><a id="section-5.3.3" name="section-5.3.3">5.3.3. Enabling the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> extensions in Bugzilla</a></h4>

<p> After patching the Bugzilla code, you need to enable the <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr>
extensions in Bugzilla.  There are two extensions: </p>

<ul>

  <li><p> Bugzilla's bug form includes information about the
  corresponding job in Perforce, and a table of fixes. </p></li>

  <li><p> Bugzilla saves its configuration parameters in its database,
  making it possible for the <abbr title="Perforce Defect Tracking
  Integration">P4DTI</abbr> to support the "emailsuffix"
  feature. </p></li>

</ul>

<p> To enable the extensions, follow these steps: </p>

<ol>

  <li> In a Web browser, go to &lt;<span class="url">http://<i>your-bugzilla-path</i>/editparams.cgi</span>&gt;. </li>

  <li> Log in as the Bugzilla administrator if prompted. </li>

  <li> Set the "p4dti" parameter to "on" (if it is not already
  on). </li>

  <li> Click "<span class="gui">Submit changes</span>" to enable the
  extensions. </li>

</ol>

<p> To disable the Perforce section in the Bugzilla bug form, set the
"p4dti" parameter to "off".  Note that this does not control the
replicator; it merely affects the display of replicated
information.</p>

</div>


<h3><a id="section-5.4" name="section-5.4">5.4. Starting and stopping the replicator manually</a></h3>

<p> To start the replicator, follow these steps from the operating system command line: </p>

<ol>

<li> Go to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory. </li>

<li> Run the command <code class="command">python run.py</code>. </li>

</ol>

<p> The first time you start the replicator, it displays log output
explaining how the replicator is connecting to the defect tracker, as
shown in <a href="#figure-10">the following figure</a>:
</p>


<div align="center">

<p> <a id="figure-10" name="figure-10">Figure 10</a>. Example
replicator log output on startup (Bugzilla integration) </p>

<table border="1" cellspacing="0" cellpadding="5"><tr><td><pre>
2003-01-10 16:01:47 UTC  (P4DTI-10070)  MySQLdb version '0.9.1' (release '0.9.1') detected.  This release is supported by the P4DTI.
2003-01-10 16:01:47 UTC  (P4DTI-1251)  Bugzilla version 2.14 detected.
2003-01-10 16:01:49 UTC  (P4DTI-8002)  Mailing 'P4DTI administrator &lt;nb+admin@company.domain&gt;'.
2003-01-10 16:01:49 UTC  (P4DTI-8669)  The P4DTI replicator has started.
...</pre></td></tr></table>

</div>

<p> Each log entry consists of the date of the entry, a message
identifier, and the message text.  You can use the message identifier of
an error message to look it up in <a href="#section-11.2">section 11.2,
"Error messages by identifier"</a>. </p>

<p> During its startup sequence, the replicator creates Perforce jobs corresponding to every defect tracker issue created or modified after the (<code class="source"><a href="#config-start_date">start_date</a></code>).  It then polls for changes every <code class="source"><a href="#config-poll_period">poll_period</a></code> seconds and replicates those changes.  <a href="#figure-11">Figure 11</a> shows typical replicator log output when it is replicating a change. </p>

<div align="center">

<p> <a id="figure-11" name="figure-11">Figure 11</a>. Example replicator log output on replication (Bugzilla integration) </p>

<table border="1" cellspacing="0" cellpadding="5"><tr><td><pre>
2003-01-10 16:01:52 UTC  (P4DTI-8046)  Replicating issue '4' to job 'bug4'.
2003-01-10 16:01:52 UTC  (P4DTI-8126)  -- Changed fields: {'Status': 'assigned', 'Priority': 'P5', 'Assigned_To': 'ndl@company.domain'}.
</pre></td></tr></table>

</div>

<p> To stop the replicator on Windows, follow these steps: </p>

<ol>

<li>Select the command window in which the replicator is running.</li>

<li>Press Control-C and wait for the replicator to next poll (this takes
up to <a href="#config-poll_period"><code
class="source">poll_period</code></a> seconds).</li>

</ol>

<p> To stop the replicator on Unix systems, kill the
replicator process.  If it's running in a shell, bring it to the
foreground and type Control-C.  If not, find out the process id of the
replicator process and run the command <code class="command">kill -TERM
<i>replicator-process-id</i></code>. </p>


<h3><a id="section-5.5" name="section-5.5">5.5. Setting up the replicator to start automatically</a></h3>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
can be run as a daemon on Unix and as an NT service on Windows. Check
that the replicator <a href="#section-5.4">starts manually</a> and runs
correctly, before leaving it to run automatically. </p>


<h4><a id="section-5.5.1" name="section-5.5.1">5.5.1. Running automatically on Unix</a></h4>

<p> If you installed the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> using the Linux <abbr title="Red Hat Package Manager">RPM</abbr> as described in <a href="#section-4.3">section 4.3, "Linux installation"</a>, a startup script is automatically created in <code class="filename">/etc/rc.d/init.d</code> directory, so that the replicator starts as a daemon when the machine is booted. Alternatively you can start the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> daemon manually by calling the startup script yourself:</p>

<blockquote><code class="command">/etc/rc.d/init.d/p4dti start</code></blockquote>

<p> The replicator halts automatically when the system is shut down.
You can stop the replicator daemon manually using the stop script: </p>

<blockquote><code class="command">/etc/rc.d/init.d/p4dti stop</code></blockquote>

<p> On Solaris or other Unixes (and on Linux if you did not use the <abbr title="Red Hat Package Manager">RPM</abbr> installer), you might want to adapt the Linux startup script.  It is in the file named <code class="filename">startup-script</code> in the installation directory. </p>

<h4><a id="section-5.5.2" name="section-5.5.2">5.5.2. Running automatically on Windows</a></h4>

<p> On Windows, you can choose to install the <abbr title="Perforce
Defect Tracking Integration">P4DTI</abbr> as a service.  The replicator
then starts when the machine is booted.  You need not be logged on to
the machine for the service to run or to stay running. </p>

<p> To install the service, follow these steps from the operating system command line: </p>

<ol>

<li> Go to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory. </li>

<li> Run the command:
<blockquote><code class="command">python service.py</code></blockquote>
</li>

</ol>

<p> Once the service has been installed, it can be started in any of the following ways:</p>

<ul>

<li>Use the control panel to start the Services applet and scroll down until you find "P4DTI". Click on this once, then click "Start".</li>

<li>Go to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory and run the command: <code class="command">python service.py start</code>.</li>

<li>When the machine reboots, the service starts automatically.</li>

</ul>

<p> Once the service is running, it can be halted in any of the following ways. Note that you need not halt the service the same way that you started it.</p>

<ul>

<li>Use the control panel to start the Services applet and scroll down until you find "P4DTI". Click on this once, then click "Stop".</li>

<li>Go to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory and run the command: <code class="command">python service.py stop</code>.</li>

<li>When the machine is shut down, the service stops automatically.</li>

</ul>

<p> To uninstall the service, go to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory and run the command:</p>

<blockquote><code class="command">python service.py remove</code></blockquote>


<h3><a id="section-5.6" name="section-5.6">5.6. Advanced configuration</a></h3>

<p> Not all of the flexibility of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> is available using the configuration options described in this section.  Advanced configuration of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> is possible, but beyond the scope of this manual.  Here are some of the things that are possible with advanced configuration: </p>

<ul>

<li> Connecting a defect tracker to multiple Perforce servers. </li>

<li> Fine control over which defect tracker issues are replicated to Perforce. </li>

<li> Fine control over which issue fields are replicated, and their names. </li>

<li> Arbitrary translation of issue data between the defect tracker and Perforce. </li>

<li> Queries based on combined defect tracker and Perforce data. </li>

<li> Working with locally customized versions of Bugzilla. </li>

<li> Redirection or fine control of logging. </li>

<li> Arbitrary mappings between Perforce and defect tracker user names. </li>

<li> Alternative policies for handling conflicts between defect tracker and Perforce changes to issues. </li>

</ul>

<p> <a href="http://www.perforce.com/perforce/support.html">Contact Perforce technical support</a> if you need any of these facilities. </p>


<h2><a id="section-6" name="section-6">6. Migrating your defect tracking data to the integrated system</a></h2>


<h3><a id="section-6.1" name="section-6.1">6.1. Migrating from the defect tracker</a></h3>

<p> You do not need to take any special action to migrate defect tracking data from your defect tracker to the integrated system. The replicator starts replicating defect tracker issues as soon as it starts up.  Only issues that are created or modified after the <code class="source"><a href="#config-start_date">start_date</a></code> are replicated to Perforce. </p>


<h3><a id="section-6.2" name="section-6.2">6.2. Allowing users to create issues in Perforce</a></h3>

<p> See <a href="../aag/index.html#section-3">section 3,
"Allowing users to create issues in Perforce"</a> in the <a
href="../aag/index.html"><cite>Perforce Defect Tracking
Advanced Administrator's Guide</cite></a>. </p>


<h3><a id="section-6.3" name="section-6.3">6.3. Migrating to the defect tracker from Perforce jobs</a></h3>

<p> See <a href="../aag/index.html#section-4">section 4,
"Migrating to the defect tracker from Perforce jobs"</a> in the <a
href="../aag/index.html"><cite>Perforce Defect Tracking
Advanced Administrator's Guide</cite></a>. </p>


<h2><a id="section-7" name="section-7">7. Testing the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a></h2>


<h3><a id="section-7.1" name="section-7.1">7.1. Taking a single step</a></h3>

<p> When you're testing your <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> configuration, you might need to tell the
<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> take a
single step; that is, to poll the defect tracker and Perforce for
changes, replicate those changes, then stop.  If you need to do this:
</p>

<ol>

<li>Change to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory.</li>

<li>Run the command <code class="command">python poll.py</code>. </li>

</ol>


<h3><a id="section-7.2" name="section-7.2">7.2. Testing your configuration</a></h3>

<p> Test the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> configuration by creating a test issue and taking it through a complete life-cycle (that is, through the workflow) as described in the <a href="../ug/index.html"><cite>Perforce Defect Tracking Integration User's Guide</cite></a>.  You might need to adapt the use cases described in the user's guide to your organization's workflow. </p>

<p> Test the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> from both Perforce and the defect tracker.  In Perforce, test the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> using the interface that your developers are most likely to use.  The main Perforce interfaces are: </p>

<ul>

<li> P4, the Perforce command line. </li>

<li> P4V, the Perforce GUI. </li>

<li> The Perforce IDE integrations, if you use them. </li>

</ul>


<h3><a id="section-7.3" name="section-7.3">7.3. Checking data consistency</a></h3>

<p> To run the consistency checker and manage its output, follow these steps: </p>

<ol>

<li>Change to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory.</li>

<li>Run the command <code class="command">python check.py</code>. </li>

</ol>

<p> You can also examine the defect tracker's database using a database client application (for example the <code class="command">mysql</code> command) to ensure the Perforce data is in there. </p>


<h2><a id="section-8" name="section-8">8. Training and documentation</a></h2>

<p> You might want to provide training for Perforce and defect tracker users before they adopt the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> for everyday use. If so, consider preparing training materials that walk them through the workflow for an issue, using the procedures that are documented in the <a href="../ug/index.html"><cite>Perforce Defect Tracking Integration User's Guide</cite></a>. </p>

<p> Even if you don't have a formal training session for your users, ensure that they: </p>

<ul>

<li> Read the <a href="../ug/index.html"><cite>Perforce Defect Tracking Integration User's Guide</cite></a>. </li>

<li> Upgrade their Perforce clients to version 2001.1 or later. </li>

<li> Know not to edit the P4DTI-* fields in jobs. </li>

</ul>


<h2><a id="section-9" name="section-9">9. Maintaining the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a></h2>


<h3><a id="section-9.1" name="section-9.1">9.1. Maintaining the configuration</a></h3>

<p> You must stop and restart the replicator as described in <a href="#section-5.4">section 5.4, "Starting the replicator manually"</a> after changing any of the configuration parameters described in <a href="#section-5.1">section 5.1, "<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> configuration"</a>. </p>

<p> You must also refresh Perforce jobs, as described in <a href="#section-9.2">section 9.2, "Refreshing jobs in Perforce"</a>, after changing: </p>

<ol>

<li> the <a href="#config-replicated_fields-Bugzilla">list of
replicated fields (<code class="source">replicated_fields</code></a>);
or </li>

<li> the <a href="#config-omitted_fields-Bugzilla">list of
omitted fields (<code class="source">omitted_fields</code></a>);
or </li>

<li> the <a href="#config-field_names-Bugzilla">field name conversion
map (<code class="source">field_names</code></a>); or </li>

<li> the <a href="#config-start_date">start date for replication (<code class="source">start_date</code>)</a>. </li>

</ol>

<p> Perforce uses the field number in the jobspec to find data, not
the field name (for more information, see the <cite><a
href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce
System Administrator's Guide</a></cite>).  If you change the
replicated fields, then the field numbers may change, which means that
the fields of existing jobs in Perforce will be mixed up.  Refreshing
the jobs re-creates them from the defect tracker with the correct
fields. </p>

<p>If you want finer control over your jobspec, set the <a
href="#config-keep_jobspec"><code
class="source">keep_jobspec</code></a> parameter to 1.  This allows
you to set your own jobspec (with <code class="command">p4
jobspec</code>) which the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> will attempt to use.  See <a
href="#section-5.2.3">section 5.2.3, "Handle Perforce jobs and
jobspec"</a>.</p>


<h3><a id="section-9.2" name="section-9.2">9.2. Refreshing jobs in Perforce</a></h3>

<p> Refreshing jobs updates all jobs in Perforce by replicating them
from the defect tracker's database.  This procedure is necessary if: </p>

<ul>

<li> The Perforce jobs become corrupted. </li>

<li> You change the set of replicated fields in the replicator's configuration.  For details, see <a href="#section-9.1">section 9.1, "Maintaining the configuration"</a>. </li>

<li> You change the start date of replication in the replicator's configuration.  For details, see <a href="#section-9.1">section 9.1</a>. </li>

</ul>

<p> To refresh the Perforce jobs, follow these steps from the operating system command line: </p>

<ol>

<li> Stop the replicator. </li>

<li> Go to the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory. </li>

<li> Run the command <code class="command">python refresh.py</code>. </li>

<li> Start the replicator again by running the command <code class="command">python run.py</code>. </li>

</ol>


<h2><a id="section-10" name="section-10">10. Uninstalling the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr></a></h2>

<p> To uninstall the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, follow these steps: </p>

<ol>

<li> Tell your staff.  Ask them to stop using either Perforce jobs or the defect tracking, whichever you're not planning to use in future. </li>

<li> Stop the replicator by following the instructions in <a href="#section-5.4">section 5.4, "Starting the replicator manually"</a> (or <a href="#section-5.5">section 5.5, "Setting up the replicator to start automatically"</a>).  </li>

<li> Remove any hooks that you created in <a href="#section-5.5">section 5.5, "Setting up the replicator to start automatically"</a>, such as Windows services, entries in <code class="filename">/etc/rc.d</code>, and so on. </li>

<li> For Bugzilla:

  <ol type="a">

  <li> Disable the Bugzilla extensions that were enabled in <a href="#section-5.3.3">section 5.3.3, "Enabling the Bugzilla extensions"</a>. </li>

  <li> Delete the replicator's Bugzilla user that was created in <a href="#section-5.3.2">section 5.3.2, "Creating a Bugzilla user for the replicator"</a>. </li>

  <li> optionally, restore the unpatched copy of Bugzilla made in <a href="#section-5.3.1">section 5.3.1, "Patching Bugzilla"</a>. </li>

  </ol>

</li>

<li> Remove any Perforce triggers that were added in <a href="#section-5.2.2">section 5.2.2, "Installing Perforce triggers to enforce workflow"</a>. </li>

<li> Delete the replicator's Perforce user created in <a href="#section-5.2.1">section 5.2.1, "Creating a Perforce user for the replicator"</a>. </li>

<li> If you installed using the Linux <abbr title="Red Hat Package Manager">RPM</abbr>, as described in <a href="#section-4.3">section 4.3, "Linux installation"</a>, uninstall using the command

<blockquote><code class="source">rpm -e p4dti</code></blockquote>

Otherwise, delete the contents of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> installation directory. </li>

<!--
<li> If you're using Bugzilla, run <code class="source">r.dt.bugzilla.drop_p4dti_tables()</code> to delete the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> tables from the database, and restore the backup copy of Bugzilla that you made before you installed the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> (see <a href="#section-3.3">section 3.3, "Bugzilla prerequisites"</a>). </li>
-->

</ol>


<h2><a id="section-11" name="section-11">11. Troubleshooting and error messages</a></h2>


<h3><a id="section-11.1" name="section-11.1">11.1. Troubleshooting</a></h3>

<p>To troubleshoot a problem with the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, follow these steps:</p>

<ol>

<li><p> Look in the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> log.  If you find an error message, see if
it is listed in <a href="#section-11.2">section 11.2, "Error messages
by identifier"</a>. </p></li>

<li><p> Check your configuration against <a href="#section-5.1">section 5.1, "<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> configuration"</a>.  Are the hostnames, userids, and passwords correct? Most problems with the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> are caused by incorrect or inconsistent configuration. </p></li>

<li><p> See if there is any online support for your problem.  Visit the
P4DTI issue reports page &lt;<a
href="http://www.ravenbrook.com/project/p4dti/issue/">http://www.ravenbrook.com/project/p4dti/issue/</a>&gt;,
choose your release and select the "Support information" report. </p></li>

<li><p> If you can't solve the problem, contact Perforce support (for details, see &lt;<a
href="http://www.perforce.com/perforce/support.html">http://www.perforce.com/perforce/support.html</a>&gt;).  Provide the following information: </p>

  <ol type="a">

  <li> What you did immediately prior to the error's occurrence. </li>

  <li> What you think should have happened. </li>

  <li> What actually happened. </li>

  <li> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> release you are using (look in the <code class="filename">readme.txt</code> that came with your <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> distribution to identify the release). </li>

  <li>The Perforce release you are using. To determine your Perforce release, enter "<code class="command">p4 info</code>" at the operating system command line. </li>

  <li>The name and release of the defect tracker you are using.  To determine your Bugzilla release, check the top of a bug form. </li>

  <li> A section of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> log that includes the error that you're reporting and some context around that error. </li>

  <li> Copies of any related e-mail messages generated by the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>. </li>

  <li> A copy of your <code class="filename">config.py</code> file. </li>

  </ol>

</li>

</ol>


<h3><a id="section-11.2" name="section-11.2">11.2. Error messages by identifier</a></h3>

<p> This isn't a complete list, but it covers the errors that have been seen in testing, or which are reasonably likely to come up, or which need some explanation.  If you see a message not covered in this section or <a href="#section-11.3">section 11.3, "Other error messages"</a> and which is not self-explanatory, please contact Perforce support (see <a href="#section-11.1">section 11.1, "Troubleshooting"</a>).</p>


<h4><a id="message-P4DTI-1069" name="message-P4DTI-1069"> (P4DTI-1069) Select '%s' of %s returns no rows. </a><br />
<a id="message-P4DTI-107X" name="message-P4DTI-107X"> (P4DTI-107X) Select '%s' of %s expecting one row but returns %d. </a><br />
<a id="message-P4DTI-1080" name="message-P4DTI-1080"> (P4DTI-1080) Trying to fetch a row from non-select '%s'. </a><br />
<a id="message-P4DTI-1091" name="message-P4DTI-1091"> (P4DTI-1091) Select '%s' of %s returned an unfetchable row. </a><br />
<a id="message-P4DTI-1105" name="message-P4DTI-1105"> (P4DTI-1105) Trying to fetch rows from non-select '%s'. </a><br />
<a id="message-P4DTI-1116" name="message-P4DTI-1116"> (P4DTI-1116) Select '%s' of %s returned unfetchable rows. </a><br />
<a id="message-P4DTI-1127" name="message-P4DTI-1127"> (P4DTI-1127) Select '%s' of %s expecting no more than one row but returns %d. </a><br />
<a id="message-P4DTI-1138" name="message-P4DTI-1138"> (P4DTI-1138) Select '%s' of %s returns %d columns but %d values. </a><br />
<a id="message-P4DTI-1160" name="message-P4DTI-1160"> (P4DTI-1160) Couldn't insert row in table '%s'. </a><br />
<a id="message-P4DTI-1171" name="message-P4DTI-1171"> (P4DTI-1171) Couldn't update row in table '%s' where %s. </a><br />
<a id="message-P4DTI-1207" name="message-P4DTI-1207"> (P4DTI-1207) Unknown or future P4DTI/Bugzilla schema version %s detected.</a></h4>

<p> It looks as though you've been running with a later release of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> and then downgraded to an older release.  We don't support downgrading; use the most recent release. </p>


<h4><a id="message-P4DTI-1229" name="message-P4DTI-1229"> (P4DTI-1229) Nothing in p4dti_replications table: database corrupted? </a></h4>

<p> The replicator has had an unexpected difficulty in accessing the Bugzilla database.  Possibly there is a problem with MySQL or MySQLdb.  Possibly you are running a version of Bugzilla which is incompatible with the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, or have customized Bugzilla in such a way that the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> has become confused.  Please contact Perforce support (see <a href="#section-11.1">section 11.1, "Troubleshooting"</a>). </p>


<h4><a id="message-P4DTI-123X" name="message-P4DTI-123X"> (P4DTI-123X) Bugzilla version %s is not supported by the P4DTI.</a></h4>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
doesn't support your version of Bugzilla.  Upgrade to a supported
release (see <a href="#section-3.3">section 3.3</a>). </p>


<h4><a id="message-P4DTI-1331" name="message-P4DTI-1331"> (P4DTI-1331) Bugzilla is not configured to store text in UTF-8 encoding.  Replication of non-ASCII text data from Bugzilla may be incorrect.</a></h4>

<p>If you have non-ASCII text in your Bugzilla database, you should ensure it is all encoded in UTF-8 and set the <code class="source">utf8</code> Bugzilla parameter.  Otherwise the P4DTI may not be able to correctly replicate the text to Perforce.  See <a href="#section-3.5">section 3.5, "Character Sets"</a>.</p>


<h4><a id="message-P4DTI-1342" name="message-P4DTI-1342"> (P4DTI-1342) MySQL version %s is not supported by the P4DTI.</a></h4>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
doesn't support your version of MySQL.  Upgrade to a supported
release (see <a href="#section-3.3">section 3.3</a>). </p>

<h4><a id="message-P4DTI-1364" name="message-P4DTI-1364"> (P4DTI-1364) MySQL version %s detected.  Use of this version is deprecated due to poor Unicode support.</a></h4>

<p> The version of MySQL you are using is not recommended for use with
the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>,
because it does not handle Unicode data well. Upgrade to a
fully-supported release (see <a href="#section-3.3">section
3.3</a>). </p>

<h4><a id="message-P4DTI-1375" name="message-P4DTI-1375"> (P4DTI-1375) Could not determine MySQL version.</a></h4>
<h4><a id="message-P4DTI-1386" name="message-P4DTI-1386"> (P4DTI-1386) Bugzilla is configured to store text in UTF-8 encoding, but the Bugzilla database is not configured for that encoding (table '%s' has character set '%s').  Replication of non-ASCII text data may be incorrect.</a></h4>

<p>Your Bugzilla installation is configured to use UTF-8 encoding for non-ASCII text, but the underlying MySQL database is not set up correctly for such use.  The P4DTI may not be able to correctly exchange non-ASCII data with the MySQL database. The Bugzilla Guide provides advice and help with configuring MySQL correctly. Also see <a href="#section-3.5">section 3.5, "Character Sets"</a>.</p>

<h4><a id="message-P4DTI-1397" name="message-P4DTI-1397"> (P4DTI-1397) Bugzilla is configured to store text in UTF-8 encoding, but the Bugzilla database is not configured for that encoding (column '%s' has character set '%s').  Replication of non-ASCII text data may be incorrect.</a></h4>

<p>Your Bugzilla installation is configured to use UTF-8 encoding for non-ASCII text, but the underlying MySQL database is not set up correctly for such use.  The P4DTI may not be able to correctly exchange non-ASCII data with the MySQL database. The Bugzilla Guide provides advice and help with configuring MySQL correctly. Also see <a href="#section-3.5">section 3.5, "Character Sets"</a>.</p>

<h4><a id="message-P4DTI-2006" name="message-P4DTI-2006"> (P4DTI-2006) Configuration parameter '%s' must be 0 or 1. </a><br />
<a id="message-P4DTI-2017" name="message-P4DTI-2017"> (P4DTI-2017) Configuration parameter '%s' (value '%s') is not a valid date.  The right format is 'YYYY-MM-DD HH:MM:SS'. </a><br />
<a id="message-P4DTI-2028" name="message-P4DTI-2028"> (P4DTI-2028) Configuration parameter '%s' (value '%s') is not a valid e-mail address. </a><br />
<a id="message-P4DTI-2039" name="message-P4DTI-2039"> (P4DTI-2039) Configuration parameter '%s' must be a function. </a><br />
<a id="message-P4DTI-204X" name="message-P4DTI-204X"> (P4DTI-204X) Configuration parameter '%s' must be an integer. </a><br />
<a id="message-P4DTI-2050" name="message-P4DTI-2050"> (P4DTI-2050) Configuration parameter '%s' must be a list. </a><br />
<a id="message-P4DTI-2061" name="message-P4DTI-2061"> (P4DTI-2061) Configuration parameter '%s' must be a list of %s. </a><br />
<a id="message-P4DTI-2072" name="message-P4DTI-2072"> (P4DTI-2072) Configuration parameter '%s' must be a string. </a><br />
<a id="message-P4DTI-2083" name="message-P4DTI-2083"> (P4DTI-2083) Configuration parameter '%s' must be None or a string. </a><br />
<a id="message-P4DTI-2094" name="message-P4DTI-2094"> (P4DTI-2094) Configuration parameter '%s' (value '%s') must be from 1 to 32 characters long, start with a letter or number, and consist of letters, numbers and underscores only. </a><br />
<a id="message-P4DTI-2108" name="message-P4DTI-2108"> (P4DTI-2108) Configuration parameter '%s' (value '%s') must contain exactly one %%d format specifier, any number of doubled percents, but no other format specifiers. </a><br />
<a id="message-P4DTI-2119" name="message-P4DTI-2119"> (P4DTI-2119) Configuration parameter '%s' (value '%s') must contain exactly one %%s format specifier, any number of doubled percents, but no other format specifiers. </a><br />
<a id="message-P4DTI-212X" name="message-P4DTI-212X"> (P4DTI-212X) Configuration parameter '%s' must be a list of pairs of strings.</a></h4>
<p> Preliminary checking of the parameters set in <code class="filename">config.py</code> has found a problem.  Correct the named parameter and start the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> again. </p>


<h4><a id="message-P4DTI-3009" name="message-P4DTI-3009"> (P4DTI-3009) Two Bugzilla states '%s' and '%s' map to the same Perforce state '%s'. </a></h4>

<p>You are running a version of Bugzilla with different bug statuses
from those in the supported Bugzilla releases. The <abbr
title="Perforce Defect Tracking Integration">P4DTI</abbr> has
attempted to choose a sensible translation of these bug statuses to
Perforce job states, but has failed.  You may be able to fix this by
changing the <a href="#config-closed_state-Bugzilla"><code
class="source">closed_state</code></a> parameter.  Otherwise you must
modify your Bugzilla configuration.</p>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> chooses the names of states of Perforce jobs based on the status names in Bugzilla. It uses the following translation system: </p>

<ul>

<li> To avoid user confusion in the Perforce interface, the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> translates all state names to lower case.</li>

<li> Perforce job states can't contain spaces and various other
characters, so the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> translates spaces to underscores, and
translates other special characters. </li>

<li> If the <a href="#config-closed_state-Bugzilla"><code class="source">closed_state</code></a> parameter is not None, the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> translates this status to "closed" and translates "CLOSED" to "bugzilla_closed".</li>

<li> Perforce jobs can't have the state "new" or "ignore", because these states have special meaning to the Perforce server.  The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> prefixes a Bugzilla status which would translate to either of these with "bugzilla_", so (in particular) "NEW" translates to Perforce state "bugzilla_new".</li>

</ul>

<p>For instance, if the <a href="#config-closed_state-Bugzilla"><code
class="source">closed_state</code></a> parameter is <code
class="source">"RESOLVED"</code>, the <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> uses the following translation table
for the default Bugzilla statuses:</p>

<div align="center">

<table border="1" cellspacing="0" cellpadding="5">

  <tr align="left" valign="top">

    <th>Bugzilla status</th>

    <th>Perforce state</th>

  </tr>

  <tr align="left" valign="top">

    <td>UNCONFIRMED</td>

    <td>unconfirmed</td>

  </tr>

  <tr align="left" valign="top">

    <td>NEW</td>

    <td>bugzilla_new</td>

  </tr>

  <tr align="left" valign="top">

    <td>ASSIGNED</td>

    <td>assigned</td>

  </tr>

  <tr align="left" valign="top">

    <td>RESOLVED</td>

    <td>closed</td>

  </tr>

  <tr align="left" valign="top">

    <td>VERIFIED</td>

    <td>verified</td>

  </tr>

  <tr align="left" valign="top">

    <td>CLOSED</td>

    <td>bugzilla_closed</td>

  </tr>

  <tr align="left" valign="top">

    <td>REOPENED</td>

    <td>reopened</td>

  </tr>

</table>

</div>

<p>Alternatively, if the <a href="#config-closed_state-Bugzilla"><code
class="source">closed_state</code></a> parameter is <code
class="source">"CLOSED"</code> or <code class="source">None</code>, the
<abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> uses the
following translation table for the default Bugzilla statuses:</p>

<div align="center">

<table border="1" cellspacing="0" cellpadding="5">

  <tr align="left" valign="top">

    <th>Bugzilla status</th>

    <th>Perforce state</th>

  </tr>

  <tr align="left" valign="top">

    <td>UNCONFIRMED</td>

    <td>unconfirmed</td>

  </tr>

  <tr align="left" valign="top">

    <td>NEW</td>

    <td>bugzilla_new</td>

  </tr>

  <tr align="left" valign="top">

    <td>ASSIGNED</td>

    <td>assigned</td>

  </tr>

  <tr align="left" valign="top">

    <td>RESOLVED</td>

    <td>resolved</td>

  </tr>

  <tr align="left" valign="top">

    <td>VERIFIED</td>

    <td>verified</td>

  </tr>

  <tr align="left" valign="top">

    <td>CLOSED</td>

    <td>closed</td>

  </tr>

  <tr align="left" valign="top">

    <td>REOPENED</td>

    <td>reopened</td>

  </tr>

</table>

</div>


<h4><a id="message-P4DTI-301X" name="message-P4DTI-301X"> (P4DTI-301X) You specified the closed_state '%s', but there's no such Bugzilla state. </a></h4>

<p> Check the <a href="#config-closed_state-Bugzilla"><code class="source">closed_state</code></a> parameter.  It must be a valid Bugzilla state. </p>


<h4><a id="message-P4DTI-3020" name="message-P4DTI-3020"> (P4DTI-3020) The '%s' column of Bugzilla's 'bugs' table is not an enum type. </a></h4>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> is incompatible with the version of Bugzilla which you are running. You are running a very old version of Bugzilla, or have customized Bugzilla. </p>


<h4><a id="message-P4DTI-3031" name="message-P4DTI-3031"> (P4DTI-3031) Configuration parameter 'bugzilla_directory' does not name a directory. </a><br />
<a id="message-P4DTI-3042" name="message-P4DTI-3042"> (P4DTI-3042) Configuration parameter 'bugzilla_directory' does not name a directory containing a mail-processing script. </a></h4>

<p> Check the <a href="#config-bugzilla_directory"><code class="source">bugzilla_directory</code></a> parameter.  It must either be <code class="source">None</code> or a string naming the Bugzilla installation directory. </p>

<p> If you're running Bugzilla under Windows, check that you've
followed the instructions in <a
href="http://www.bugzilla.org/docs214/html/win32.html">section 3.6,
"Win32 Installation Notes"</a> of the Bugzilla Guide [<a href="http://www.bugzilla.org/docs214/html/">Bugzilla 2001-08-07</a>]. </p>


<h4><a id="message-P4DTI-3053" name="message-P4DTI-3053"> (P4DTI-3053) Bugzilla's table 'profiles' does not have a 'login_name' column. </a><br />
<a id="message-P4DTI-3064" name="message-P4DTI-3064">(P4DTI-3064) The 'login_name' column of Bugzilla's 'profiles' table does not have a 'text' type. </a><br />
<a id="message-P4DTI-3075" name="message-P4DTI-3075"> (P4DTI-3075) Bugzilla's table 'bugs' does not have a '%s' column. </a><br />
<a id="message-P4DTI-3086" name="message-P4DTI-3086"> (P4DTI-3086) The 'bug_status' column of Bugzilla's 'bugs' table is not an enum type. </a><br />
<a id="message-P4DTI-3097" name="message-P4DTI-3097"> (P4DTI-3097) The 'resolution' column of Bugzilla's 'bugs' table is not an enum type. </a><br />
<a id="message-P4DTI-3100" name="message-P4DTI-3100"> (P4DTI-3100) The 'resolution' column of Bugzilla's 'bugs' table does not have a 'FIXED' value. </a></h4>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> is incompatible with the version of Bugzilla which you are running. You are running a very old version of Bugzilla, or have customized Bugzilla. </p>


<h4><a id="message-P4DTI-3111" name="message-P4DTI-3111"> (P4DTI-3111) Field '%s' specified in 'replicated_fields' is a system field: leave it out! </a></h4>

<p> Some fields are always replicated.  For details, see the <a href="#config-replicated_fields-Bugzilla"><code class="source">replicated_fields</code></a> parameter. </p>

<p> Remove the system fields from your list of replicated fields and start the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> again. </p>


<h4><a id="message-P4DTI-3122" name="message-P4DTI-3122"> (P4DTI-3122) Field '%s' appears twice in 'replicated_fields'. </a></h4>

<p> Each replicated field must only appear once in the <a href="#config-replicated_fields-Bugzilla"><code class="source">replicated_fields</code></a> parameter.  Remove the duplicate and start the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> again. </p>


<h4><a id="message-P4DTI-3144" name="message-P4DTI-3144"> (P4DTI-3144) Field '%s' specified in 'replicated_fields' list has type '%s': this is not yet supported by P4DTI. </a><br />
<a id="message-P4DTI-3155" name="message-P4DTI-3155"> (P4DTI-3155) Field '%s' specified in 'replicated_fields' list has floating-point type: this is not yet supported by P4DTI. </a></h4>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> doesn't support all Bugzilla field types.  One of the fields in your <a href="#config-replicated_fields-Bugzilla"><code class="source">replicated_fields</code></a> parameter has an unsupported type. </p>

<p> Remove the field from your <a href="#config-replicated_fields-Bugzilla"><code class="source">replicated_fields</code></a> and start the replicator again. </p>

<p> If you really need to have the field replicated, you have the following options: </p>

<ul>

<li> Change the type of this field in Bugzilla. </li>

<li> Submit a request to Perforce. </li>

<li> Implement a new subclass of <code class="source">replicator.translator</code> to handle the field type (for the existing translators, see <code class="filename">dt_bugzilla.py</code>).  For instructions on how to extend the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>, and how to contribute your extensions back to the community, see the <cite>Perforce Defect Tracking Integration Integrator's Guide</cite>. </li>

</ul>


<h4><a id="message-P4DTI-3166" name="message-P4DTI-3166"> (P4DTI-3166) You can't have a field called 'code' in the Perforce jobspec. </a></h4>

<p>You are running a version of Bugzilla with different bug fields
from those in the supported Bugzilla versions, and are trying to
replicate a field called "code".  Perforce doesn't allow a job field
called "code".  Remove the "code" field from the <a
href="#config-replicated_fields-Bugzilla"><code
class="source">replicated_fields</code></a> parameter or modify your
Bugzilla configuration to rename the field.</p>


<h4><a id="message-P4DTI-3177" name="message-P4DTI-3177"> (P4DTI-3177) Too many fields to replicate: Perforce jobs can contain only 99 fields. </a></h4>

<p> Reduce the number of fields that you replicate by removing items from the <a href="#config-replicated_fields-Bugzilla"><code class="source">replicated_fields</code></a> parameter. </p>


<h4><a id="message-P4DTI-3199" name="message-P4DTI-3199"> (P4DTI-3199) Field '%s' specified in 'omitted_fields' is not a system field: leave it out!</a></h4>

<p>Remove the named field from the <a href="#config-omitted_fields-Bugzilla"><code class="source">omitted_fields</code></a> parameter.</p>

<h4><a id="message-P4DTI-3202" name="message-P4DTI-3202"> (P4DTI-3202) Field '%s' appears twice in 'omitted_fields'.</a></h4>

<p>Remove the duplicated field from the <a href="#config-omitted_fields-Bugzilla"><code class="source">omitted_fields</code></a> parameter.</p>

<h4><a id="message-P4DTI-3213" name="message-P4DTI-3213"> (P4DTI-3213) Field '%s' in 'field_names' is not a replicated field.</a></h4>

<p>Remove the named field from the <a href="#config-field_names-Bugzilla"><code class="source">field_names</code></a> parameter.</p>

<h4><a id="message-P4DTI-3224" name="message-P4DTI-3224"> (P4DTI-3224) Bugzilla field '%s' appears twice in 'field_names'.</a><br />
<a id="message-P4DTI-3235" name="message-P4DTI-3235"> (P4DTI-3235) Perforce field '%s' appears twice in 'field_names'.</a></h4>

<p>Remove the duplicated field from the <a href="#config-field_names-Bugzilla"><code class="source">field_names</code></a> parameter.</p>

<h4><a id="message-P4DTI-3246" name="message-P4DTI-3246"> (P4DTI-3246) Bugzilla fields '%s' and '%s' both map to Perforce field '%s'.</a></h4>

<p>The <a href="#config-field_names-Bugzilla"><code class="source">field_names</code></a> parameter, combined with default field naming, gives the same Perforce field name to more than one Bugzilla field.  Change that parameter so that each replicated Bugzilla field gets a unique Perforce field name.</p>


<h4><a id="message-P4DTI-5015" name="message-P4DTI-5015"> (P4DTI-5015) User %d doesn't have permission to change field '%s' of bug %d to %s. </a></h4>

<p> A Perforce user has made a change which Bugzilla would not have permitted them to make. </p>

<p> Bugzilla has complex access controls which prohibit some users from making some changes to bugs.  Perforce protections cannot express these controls so the replicator enforces these controls by rejecting changes to jobs which would not be permitted by Bugzilla. </p>

<p> Another possible cause is that the <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> has failed to find a Bugzilla user
corresponding to the Perforce user.  See <a href="#section-3.4">section
3.4, "User accounts"</a> for details of how users are mapped from one
system to the other, and how to diagnose problems. </p>


<h4><a id="message-P4DTI-5026" name="message-P4DTI-5026"> (P4DTI-5026) The P4DTI does not support marking bugs as DUPLICATE from Perforce. </a></h4>

<p> A Perforce user has changed a job's status to "duplicate". </p>

<p> When a bug is marked as a duplicate in Bugzilla, the number of the other bug is provided and a message identifying it is appended to the long description.  The Perforce job interface provides no easy way of expressing this, so the replicator does not allow it. </p>


<h4><a id="message-P4DTI-5037" name="message-P4DTI-5037"> (P4DTI-5037) Bugzilla does not allow a transition from status '%s' to '%s'. </a></h4>

<p> A Perforce user has changed the 'status' field of a bug in a way not permitted by Bugzilla.  For instance, moving a bug directly from UNCONFIRMED to CLOSED.  These transitions are not allowed in Bugzilla, and the replicator enforces that prohibition by rejecting such a change. </p>

<p> It is difficult but possible to cause this error by making more than one change to the status in rapid succession (between two consecutive replicator polls).  The replicator can't tell if that has happened, so has to reject the change anyway. </p>


<h4><a id="message-P4DTI-5048" name="message-P4DTI-5048"> (P4DTI-5048) Cannot change Bugzilla field '%s'. </a></h4>

<p> A Perforce user has made a change to a field which the replicator treats as read-only.  See <a href="#section-5.1.5">section 5.1.5, "Choosing which fields to replicate"</a>. </p>


<h4><a id="message-P4DTI-5059" name="message-P4DTI-5059"> (P4DTI-5059) Can only append to Bugzilla field '%s'. </a></h4>

<p> A Perforce user has changed the long description text in some way other than appending to it.  See <a href="#section-5.1.5">section 5.1.5, "Choosing which fields to replicate"</a>. </p>


<h4> <a id="message-P4DTI-506X" name="message-P4DTI-506X"> (P4DTI-506X) Updating non-existent Bugzilla field '%s'. </a><br />
<a id="message-P4DTI-5092" name="message-P4DTI-5092"> (P4DTI-5092) No Perforce status corresponding to Bugzilla status '%s'. </a><br />
<a id="message-P4DTI-5106" name="message-P4DTI-5106"> (P4DTI-5106) No Bugzilla status corresponding to Perforce status '%s'. </a></h4>

<p> These errors indicate a serious configuration error; someone's changed configure_bugzilla.py and broken it. </p>


<h4><a id="message-P4DTI-5117" name="message-P4DTI-5117"> (P4DTI-5117) Perforce field value '%s' could not be translated to a number for replication to Bugzilla. </a></h4>

<p> A Perforce user has set a field, which corresponds to a numeric field in Bugzilla, to something which couldn't be converted to a number. </p>


<h4><a id="message-P4DTI-5128" name="message-P4DTI-5128"> (P4DTI-5128) Bugzilla P4DTI user '%s' has e-mail address matching Perforce user '%s', not Perforce P4DTI user '%s'. </a></h4>

<p> The replicator Perforce user (<a href="#config-p4_user"><code class="source">p4_user</code></a> parameter) has an e-mail address that does not match the <a href="#config-replicator_address"><code class="source">replicator_address</code></a> parameter.  See <a href="#section-5.2.1">section 5.2.1, "Creating a Perforce user for the replicator"</a>. </p>


<h4><a id="message-P4DTI-5139" name="message-P4DTI-5139"> (P4DTI-5139) Bugzilla P4DTI user '%s' is not a known Bugzilla user. </a></h4>

<p> There is no Bugzilla user whose e-mail address matches the <a href="#config-replicator_address"><code class="source">replicator_address</code></a> parameter.  See <a href="#section-5.3.2">section 5.3.2, "Creating a Bugzilla user for the replicator"</a>. </p>


<h4><a id="message-P4DTI-514X" name="message-P4DTI-514X"> (P4DTI-514X) There is no Bugzilla user corresponding to Perforce user '%s'. </a></h4>

<p> You have changed a user field in a job to a Perforce user who does not have a Bugzilla user record.  The replicator is unable to replicate that field back to Bugzilla. </p>


<h4> <a id="message-P4DTI-5172" name="message-P4DTI-5172"> (P4DTI-5172) Can't create Bugzilla bug without short_desc field. </a><br />
<a id="message-P4DTI-5183" name="message-P4DTI-5183"> (P4DTI-5183) Can't create Bugzilla bug with empty short_desc field. </a><br />
<a id="message-P4DTI-5194" name="message-P4DTI-5194"> (P4DTI-5194) Can't create Bugzilla bug without product field. </a><br />
<a id="message-P4DTI-5208" name="message-P4DTI-5208"> (P4DTI-5208) Can't create Bugzilla bug for non-existent product '%s'. </a><br />
<a id="message-P4DTI-5219" name="message-P4DTI-5219"> (P4DTI-5219) Can't create Bugzilla bug for product '%s' with no components. </a><br />
<a id="message-P4DTI-522X" name="message-P4DTI-522X"> (P4DTI-522X) Can't create Bugzilla bug without component field. </a><br />
<a id="message-P4DTI-5230" name="message-P4DTI-5230"> (P4DTI-5230) Can't create Bugzilla bug: product '%s' has no component '%s'. </a><br />
<a id="message-P4DTI-5241" name="message-P4DTI-5241"> (P4DTI-5241) Can't create Bugzilla bug for product '%s' with no versions. </a><br />
<a id="message-P4DTI-5252" name="message-P4DTI-5252"> (P4DTI-5252) Can't create Bugzilla bug without version field. </a><br />
<a id="message-P4DTI-5263" name="message-P4DTI-5263"> (P4DTI-5263) Can't create Bugzilla bug: product '%s' has no version '%s'. </a><br />
<a id="message-P4DTI-5285" name="message-P4DTI-5285"> (P4DTI-5285) Can't create Bugzilla bug with invalid group '%s'. </a><br />
<a id="message-P4DTI-530X" name="message-P4DTI-530X"> (P4DTI-530X) Can't create Bugzilla bug with bug_status '%s' and no resolution. </a><br />
<a id="message-P4DTI-5310" name="message-P4DTI-5310"> (P4DTI-5310) Can't create Bugzilla bug with field '%s'. </a><br />
<a id="message-P4DTI-5321" name="message-P4DTI-5321"> (P4DTI-5321) Can't create Bugzilla bug without reporter field. </a></h4>

<p> The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>
has tried to create a new bug in Bugzilla but the new bug doesn't
satisfy a Bugzilla constraint.  There are two solutions: </p>

<ul>

  <li><p> Edit the Perforce job so that it can be translated to a new
  bug that does satisfy the constraint. </p></li>

  <li><p> Change your <a
  href="../aag/index.html#config-translate_jobspec"><code
  class="source">translate_jobspec</code></a> and <a
  href="../aag/index.html#config-prepare_issue"><code
  class="source">prepare_issue</code></a> functions so that they satisfy
  the constraint.  Then </p>

  <ul>

    <li><p> If you were migrating, re-run the migration starting from
    the job which couldn't be migrated [<a title="Perforce Defect
    Tracking Integration Advanced Administrator's Guide"
    href="../aag/index.html#section-4.10">GDR
    2001-11-14, 4.10</a>]. </p></li>

    <li><p> Otherwise, restart the replicator (see <a
    href="#section-5.4">section 5.4</a>) and update the job so that it
    is replicated again (by running a command like <code
    class="command">p4 job -o <i>JOBNAME</i> | p4 job
    -i</code>. </p></li>

  </ul></li>

</ul>


<h4><a id="message-P4DTI-5354" name="message-P4DTI-5354"> (P4DTI-5354) '%s' not a Bugzilla group. </a></h4>

<p> An entry in <a
href="../aag/index.html#config-migrated_user_groups"><code
class="source">migrated_user_groups</code></a> is not a Bugzilla group.
Fix the parameter and re-run migration of users [<a title="Perforce
Defect Tracking Integration Advanced Administrator's Guide"
href="../aag/index.html#section-4.4">GDR
2001-11-14, 4.4</a>]. </p>


<h4><a id="message-P4DTI-5376" name="message-P4DTI-5376"> (P4DTI-5376) User %d is disabled, so cannot edit bug %d. </a></h4>

<h4><a id="message-P4DTI-5387" name="message-P4DTI-5387"> (P4DTI-5387) User 0 cannot edit bug %d. </a></h4>

<h4><a id="message-P4DTI-5398" name="message-P4DTI-5398"> (P4DTI-5398) Can't create Bugzilla bug with reporter 0. </a></h4>

<p>The P4DTI has attempted to create a new Bugzilla bug (either as
part of migration of pre-existing jobs or when replicating a
newly-created job), and was unable to deduce the reporting user.  See
<a href="../aag/index.html#section-3">section 3,
"Allowing users to create ussies in Perforce"</a> and <a
href="../aag/index.html#section-4">section 4,
"Migrating to the defect tracker from Perforce jobs"</a> , of the
<cite><a href="../aag/index.html">Perforce Defect
Tracking Integration Advanced Administrator's
Guide</a></cite>. </p>

<h4><a id="message-P4DTI-5401" name="message-P4DTI-5401"> (P4DTI-5401) Can't change Bugzilla field '%s' to 0. </a></h4>

<p>A user in Perforce has changed one of the required user fields
("Reporter" or "Assigned_To") to "None".  This value is only permitted
in the optional user field ("QA_Contact").</p>

<h4><a id="message-P4DTI-5423" name="message-P4DTI-5423"> (P4DTI-5423) Perforce P4DTI user '%s' is not a known Perforce user.</a></h4>

<p>The <a href="#config-p4_user">replicator Perforce user</a> is not
known to the Perforce server.</p>

<h4><a id="message-P4DTI-5434" name="message-P4DTI-5434"> (P4DTI-5434) Perforce P4DTI user '%s' has the same e-mail address '%s' as these other Perforce users: %s.</a></h4>

<p>The <a href="#config-p4_user">replicator Perforce user</a> has the
same e-mail address as one or more other Perforce users.</p>

<h4><a id="message-P4DTI-5456" name="message-P4DTI-5456"> (P4DTI-5456) Bugzilla P4DTI user e-mail address '%s' belongs to several Bugzilla users: %s.</a></h4>

<p>Several Bugzilla users have their e-mail address set to the <a
href="#config-replicator_address">replicator e-mail address</a>.  This
should be the e-mail address of the Bugzilla P4DTI user only. See <a
href="#section-5.3.2">section 5.3.2</a>.</p>

<h4><a id="message-P4DTI-5503" name="message-P4DTI-5503"> (P4DTI-5503) Bugzilla P4DTI user '%s' does not have a matching Perforce user.  It should match the Perforce user '%s' but that matches the Bugzilla user %d (e-mail address '%s').</a></h4>

<h4><a id="message-P4DTI-5514" name="message-P4DTI-5514"> (P4DTI-5514) Bugzilla P4DTI user '%s' does not have a matching Perforce user.  It should match the Perforce user '%s' (which has e-mail address '%s').</a></h4>

<p>The Bugzilla P4DTI user (identified by the <a
href="#config-replicator_address">replicator e-mail address</a>)
should match the <a href="#config-p4_user">P4DTI Perforce user</a>,
but their e-mail addresses do not match.</p>

<h4><a id="message-P4DTI-5558" name="message-P4DTI-5558"> (P4DTI-5558) User %d must be in group '%s' to edit bug %d.</a></h4>

<h4><a id="message-P4DTI-5569" name="message-P4DTI-5569"> (P4DTI-5569) User %d must be in group '%s' to edit bug %d in product '%s'.</a></h4>

<p> A Perforce user has made a change to a bug which Bugzilla would
not allow them to edit. </p>

<p> Bugzilla bugs can be grouped into "bug groups", which restrict the
ability of users to view or edit them.  Perforce protections cannot
express these bug groups, so the replicator must enforce the Bugzilla
restrictions by rejecting changes made by users outside the necessary
bug group or groups. </p>

<p> Another possible cause is that the <abbr title="Perforce Defect
Tracking Integration">P4DTI</abbr> has failed to find a Bugzilla user
corresponding to the Perforce user.  See <a href="#section-3.4">section
3.4, "User accounts"</a> for details of how users are mapped from one
system to the other, and how to diagnose problems. </p>

<h4><a id="message-P4DTI-7043" name="message-P4DTI-7043"> (P4DTI-7043) Perforce client changelevel %d is not supported by P4DTI.  Client must be at changelevel %d or above. </a></h4>

<p> The Perforce client executable specified by the <a href="#config-p4_client_executable"><code class="source">p4_client_executable</code></a> parameter is an old version not supported by the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>.  Install a supported version (see <a href="#section-3.2">section 3.2, "Perforce prerequisites"</a>) and set the <a href="#config-p4_client_executable"><code class="source">p4_client_executable</code></a> parameter to name it. </p>


<h4><a id="message-P4DTI-7054" name="message-P4DTI-7054"> (P4DTI-7054) The command '%s' didn't report a recognizable version number.  Check your setting for the 'p4_client_executable' parameter. </a></h4>

<p> Your setting for the <a href="#config-p4_client_executable"><code class="source">p4_client_executable</code></a> parameter doesn't name a Perforce client executable (or doesn't name one that's supported by the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>.  Correct your setting. </p>


<h4><a id="message-P4DTI-7076" name="message-P4DTI-7076"> (P4DTI-7076) The Perforce client exited with error code %d.  The server might be down; the server address might be incorrect; or your Perforce license might have expired. </a></h4>

<p> Check your setting for the <a href="#config-p4_port"><code
class="source">p4_port</code></a> parameter.  Check that the Perforce
server is running happily.  Check that it has enough disk space.  Check
that your Perforce license is up to date. </p>


<h4><a id="message-P4DTI-7065" name="message-P4DTI-7065"> (P4DTI-7065) %s  The Perforce client exited with error code %d. </a><br />
<a id="message-P4DTI-7087" name="message-P4DTI-7087"> (P4DTI-7087) %s </a></h4>

<p> There's a problem with Perforce.  Look up the text of the error message in <a href="#section-11.3">section 11.3, "Other error messages"</a>, for advice. </p>


<h4><a id="message-P4DTI-7101" name="message-P4DTI-7101"> (P4DTI-7101) Jobspec fields '%s' and '%s' have the same number %d. </a></h4>

<p> The replicator was trying to install a new Perforce jobspec, but it
can't because two fields have the same field number (field number is a
unique key in Perforce).  If you're using advanced configuration [<a
title="Perforce Defect Tracking Integration Integrator's Guide"
href="http://www.ravenbrook.com/project/p4dti/version/2.4/manual/ig/#section-8.6">GDR 2000-10-16,
8.6</a>], then check that your <a
href="http://www.ravenbrook.com/project/p4dti/version/2.4/manual/ig/#config-jobspec"><code
class="source">jobspec</code></a> configuration parameter gives unique
numbers to each field; see [<a title="Perforce Defect Tracking
Integration Integrator's Guide"
href="http://www.ravenbrook.com/project/p4dti/version/2.4/manual/ig/#section-8.4">GDR 2000-10-16,
8.4</a>].  Otherwise, contact Perforce support (see <a
href="#section-11.1">section 11.1, "Troubleshooting"</a>). </p>

<h4><a id="message-P4DTI-7156" name="message-P4DTI-7156"> (P4DTI-7156) Jobspec does not support P4DTI.</a></h4>

<p>You have not allowed the P4DTI to install its own jobspec, and your
Perforce jobspec does not have the necessary P4DTI fields.  Warning
messages preceding this error message should identify the missing
fields.  See <a href="#section-5.2.3">section 5.2.3, "Handle Perforce
jobs and jobspec"</a>.</p>

<h4><a id="message-P4DTI-7178" name="message-P4DTI-7178"> (P4DTI-7178) Current jobspec cannot be used for replication.</a></h4>

<p>You have not allowed the P4DTI to install its own jobspec, and your
current jobspec will not support replicating the fields which you have
specified.  Warning messages preceding this error message should
identify missing or incorrect fields.  See <a
href="#section-5.2.3">section 5.2.3, "Handle Perforce jobs and
jobspec"</a>.</p>

<h4><a id="message-P4DTI-7305" name="message-P4DTI-7305"> (P4DTI-7305) Too many fields in jobspec. </a></h4>

<p>An attempt to add a replicated field to the Perforce jobspec has
failed because there are too many fields.  Remove some fields from the
jobspec or reduce the number of fields that you replicate by removing
items from the <a href="#config-replicated_fields-Bugzilla"><code
class="source">replicated_fields</code></a> parameter. See <a
href="#section-5.2.3">section 5.2.3, "Handle Perforce jobs and
jobspec"</a>.</p>

<h4><a id="message-P4DTI-7360" name="message-P4DTI-7360"> (P4DTI-7360) Perforce message '%s'.  Is P4CHARSET set with a non-Unicode server? Reverting to Unicode mode %s. </a></h4>

<p>The replicator has encountered a Unicode-specific error when trying
to communicate with the Perforce server both in Unicode mode and in
ASCII mode.  The replicator can perform Perforce actions either in
ASCII mode (with no -C switch) or Unicode mode (with the switch -C
utf8).  If a Perforce action fails with a Unicode error, the
replicator switches mode and retries.  This error message indicates
that the action has failed with Unicode errors in both modes.</p>

<p>This generally indicates that P4CHARSET is set somehow (in the
environment, the registry, or a p4config file), and that the Perforce
server is not in Unicode mode.</p>

<h4><a id="message-P4DTI-8341" name="message-P4DTI-8341"> (P4DTI-8341) The Perforce server changelevel %d is not supported by the P4DTI.  See the P4DTI release notes for Perforce server versions supported by the P4DTI. </a><br />
<a id="message-P4DTI-8352" name="message-P4DTI-8352"> (P4DTI-8352) The Perforce command 'p4 info' didn't report a recognisable version. </a></h4>

<p> You are running a version of the Perforce server that is not
supported by the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr>.  See the release notes for supported Perforce
server versions. </p>


<h4><a id="message-P4DTI-8727" name="message-P4DTI-8727"> (P4DTI-8727) Issue '%s' should be replicated but is not. </a><br />
<a id="message-P4DTI-8738" name="message-P4DTI-8738"> (P4DTI-8738) Issue '%s' should be replicated to job '%s' but that job either does not exist or is not replicated. </a><br />
<a id="message-P4DTI-8749" name="message-P4DTI-8749"> (P4DTI-8749) Issue '%s' is replicated to job '%s' but that job is replicated to issue '%s'. </a><br />
<a id="message-P4DTI-875X" name="message-P4DTI-875X"> (P4DTI-875X) Job '%s' would need the following set of changes in order to match issue '%s': %s. </a><br />
<a id="message-P4DTI-8760" name="message-P4DTI-8760"> (P4DTI-8760) Job '%s' has associated filespec '%s' but there is no corresponding filespec for issue '%s'. </a><br />
<a id="message-P4DTI-8771" name="message-P4DTI-8771"> (P4DTI-8771) Issue '%s' has associated filespec '%s' but there is no corresponding filespec for job '%s'. </a><br />
<a id="message-P4DTI-8782" name="message-P4DTI-8782"> (P4DTI-8782) Change %s fixes job '%s' but there is no corresponding fix for issue '%s'. </a><br />
<a id="message-P4DTI-8793" name="message-P4DTI-8793"> (P4DTI-8793) Change %d fixes issue '%s' but there is no corresponding fix for job '%s'. </a><br />
<a id="message-P4DTI-8807" name="message-P4DTI-8807"> (P4DTI-8807) Change %s fixes job '%s' with status '%s', but change %d fixes issue '%s' with status '%s'. </a><br />
<a id="message-P4DTI-8818" name="message-P4DTI-8818"> (P4DTI-8818) Job '%s' is marked as being replicated to issue '%s' but that issue is being replicated to job '%s'. </a><br />
<a id="message-P4DTI-8829" name="message-P4DTI-8829"> (P4DTI-8829) Job '%s' is marked as being replicated to issue '%s' but that issue either doesn't exist or is not being replicated by this replicator. </a><br />
<a id="message-P4DTI-8862" name="message-P4DTI-8862"> (P4DTI-8862) 1 inconsistency found. </a><br />
<a id="message-P4DTI-8873" name="message-P4DTI-8873"> (P4DTI-8873) %d inconsistencies found. </a><br />
<a id="message-P4DTI-8884" name="message-P4DTI-8884"> (P4DTI-8884) Asked for issue '%s' but got an error instead. </a><br />
<a id="message-P4DTI-8895" name="message-P4DTI-8895"> (P4DTI-8895) Job '%s' has a date field in the wrong format: %s. </a></h4>

<p> The Perforce jobs database is inconsistent with the defect tracker
database.  This might be a consequence of frequent activity in the two
systems (because the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> works by polling, there's a delay between
changing one system and the the other system being brought up to date);
if so, the databases will be made consistent if you cease activity and
poll twice (<a href="#section-7.1">section 7.1, "Taking a single
step"</a>). </p>

<p> If polling doesn't make the databases consistent, then you can
either make them consistent by editing the offending jobs, or by
refreshing the Perforce jobs (<a href="#section-9.2">section 9.2,
"Refreshing jobs in Perforce"</a>). </p>

<p> If that doesn't work, contact Perforce support (see <a
href="#section-11.1">section 11.1, "Troubleshooting"</a>). </p>


<h4><a id="message-P4DTI-891X" name="message-P4DTI-891X"> (P4DTI-891X) Error (%s): %s </a></h4>

<p> There's a problem in the defect tracker.  Look up the text of the error message in <a href="#section-11.3">section 11.3, "Other error messages"</a>, for advice. </p>


<h4><a id="message-P4DTI-9060" name="message-P4DTI-9060"> (P4DTI-9060) Defect tracker '%s' does not support migration of Perforce users. </a></h4>

<p> This should not arise, as the Bugzilla integration does support
user migration. </p>

<h4><a id="message-P4DTI-913X" name="message-P4DTI-913X"> (P4DTI-913X) Error in P4DTI logger: %s </a></h4>

<p> Something's gone wrong with the P4DTI logger.  Look up the text of
the error message in <a href="#section-11.3">section 11.3, "Other error
messages"</a>, for advice. </p>


<h4><a id="message-P4DTI-9242" name="message-P4DTI-9242"> (P4DTI-9242) Expected translate_jobspec to return a dictionary, but instead it returned %s. </a></h4>

<p> Check that you have a line like <code class="source">return
job</code> at the end of your <a
href="../aag/index.html#config-translate_jobspec"><code
class="source">translate_jobspec</code></a> function. </p>

<h4><a id="message-P4DTI-9275" name="message-P4DTI-9275"> (P4DTI-9275) Can't use Perforce client %s. </a></h4>

<p> The P4DTI automatically generates and uses a Perforce client,
named after the server's hostname.  This warning message is generated
if automatically generating such a client does not work for some
reason (e.g. if the Perforce server has a depot with an invalid name),
or if such a client already exists and is broken in some way.  This
warning message is followed by the error message from Perforce, and
then by <a href="#message-P4DTI-9286">message P4DTI-9286</a></p>

<h4><a id="message-P4DTI-9286" name="message-P4DTI-9286"> (P4DTI-9286)  Attempting to make working Perforce client %s. </a></h4>

<p>See <a href="#message-P4DTI-9275">message P4DTI-9275</a>.</p>

<h4><a id="message-P4DTI-10059" name="message-P4DTI-10059"> (P4DTI-10059) MySQLdb version '%s' (release '%s') detected.  This release is incompatible with the P4DTI.</a></h4>

<p> You're using a release of the Python database module MySQLdb which is known to be incompatible with the P4DTI.  Install a supported release of MySQLdb.  See <a href="#section-3.3">section 3.3, "Bugzilla prerequisites"</a>. </p>


<h4><a id="message-P4DTI-1006X" name="message-P4DTI-1006X"> (P4DTI-1006X) MySQLdb version '%s' (release '%s') detected.  This release is not supported by the P4DTI, but may work. </a></h4>

<p> You're using a release of the Python database module MySQLdb which is not supported by the P4DTI, but which may work anyway.  If you have problems accessing the Bugzilla database, install a supported release of MySQLdb.  See <a href="#section-3.3">section 3.3, "Bugzilla prerequisites"</a>. </p>


<h4><a id="message-P4DTI-10106" name="message-P4DTI-10106"> (P4DTI-10106) Fatal error in P4DTI service: %s. </a></h4>

<p> Something's happened to the <abbr title="Perforce Defect Tracking
Integration">P4DTI</abbr> when running as an NT service.  Look up the
text of the error message in <a href="#section-11.3">section 11.3,
"Other error messages"</a>, for advice. </p>


<h4><a id="message-P4DTI-10172" name="message-P4DTI-10172"> (P4DTI-10172) An attempt to write a log message to standard output failed. </a></h4>

<p> Something has gone wrong with the standard output of the replicator.
This can happen if standard output was originally connected to a
terminal, but the terminal has been closed without stopping the
replicator. </p>

<p> The remedy is to start the replicator with the startup script, as
described in <a href="#section-5.5.1">section 5.5.1, "Running
automatically on Unix"</a>, or to redirect the standard output to
somewhere safe, for example </p>

<blockquote><code class="command">python run.py &gt; /dev/null</code></blockquote>


<h4><a id="message-P4DTI-10219" name="message-P4DTI-10219"> (P4DTI-10219) The P4DTI does not support the operating system '%s'. </a></h4>

<p> You've installed the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> on an unsupported operating system.  See the release notes for details of the supported operating systems. </p>


<h4><a id="message-P4DTI-1022X" name="message-P4DTI-1022X"> (P4DTI-1022X) MySQLdb version '%s' (release '%s') detected.  This release is supported by the P4DTI, but deprecated.  Future versions of the P4DTI may not support this release.</a></h4>

<p> You're using a release of the Python database module MySQLdb which is deprecated for use with the P4DTI.  Install a more recent release of MySQLdb.  See <a href="#section-3.3">section 3.3, "Bugzilla prerequisites"</a>. </p>


<h4><a id="message-P4DTI-10230" name="message-P4DTI-10230"> (P4DTI-10230) MySQLdb version '%s' (release '%s') detected. This old release is not supported by the P4DTI, and may not provide functions on which the P4DTI relies.</a></h4>

<p> You're using an old release of the Python database module MySQLdb which has never been supported by the P4DTI, but which may work anyway.  If you have problems accessing the Bugzilla database, install a supported release of MySQLdb.  See <a href="#section-3.3">section 3.3, "Bugzilla prerequisites"</a>. </p>


<h4><a id="message-P4DTI-10241" name="message-P4DTI-10241"> (P4DTI-10241) MySQLdb version '%s' (release '%s') detected.  This release is supported by the P4DTI, but deprecated.  Operation with Unicode text may be incorrect.  Future versions of the P4DTI may not support this release.</a></h4>

<p> You're using an old release of the Python database module MySQLdb.  This release was once supported by the P4DTI, and the P4DTI may operate correctly with it.  However, it does not provide the character-set support which is required for handling non-ASCII text (e.g. accented characters).  Errors may occur when replicating such data.  You should upgrade to a supported release of MySQLdb.  See <a href="#section-3.3">section 3.3, "Bugzilla prerequisites"</a>. </p>


<h3><a id="section-11.3" name="section-11.3">11.3. Other Error messages</a></h3>


<h4><a id="error-_mysql.InternalError-1" name="error-_mysql.InternalError-1">_mysql.InternalError: (3, "Error writing file '%s' (Errcode: 28)")</a></h4>

<p> We've seen this error when MySQL has run out of disk space. </p>


<h4><a id="error-_mysql.OperationalError-1" name="error-_mysql.OperationalError-1">_mysql.OperationalError: (1045, "Access denied for user: '%s@%s' (Using password: NO)")</a></h4>

<p> The <a href="#config-dbms_user"><code class="source">dbms_user</code></a> parameter is set incorrectly or the <a href="#config-dbms_password"><code class="source">dbms_password</code></a> parameter is set to None when a password is required. </p>


<h4><a id="error-_mysql.OperationalError-2" name="error-_mysql.OperationalError-2">_mysql.OperationalError: (1045, "Access denied for user: '%s@%s' (Using password: YES)")</a></h4>

<p> The <a href="#config-dbms_password"><code class="source">dbms_password</code></a> parameter is set incorrectly. </p>


<h4><a id="error-_mysql.OperationalError-3" name="error-_mysql.OperationalError-3">_mysql.OperationalError: (1049, "Unknown database '%s'")</a></h4>

<p> The MySQL server on <a href="#config-dbms_host"><code class="source">dbms_host</code></a> doesn't serve a database whose name matches the <a href="#config-dbms_database"><code class="source">dbms_database</code></a> parameter. </p>


<h4><a id="error-_mysql.OperationalError-4" name="error-_mysql.OperationalError-4">_mysql.OperationalError: (2003, "Can't connect to MySQL server on '%s' (111)")</a></h4>

<p> A MySQL connection couldn't be established to the host given by the <a href="#config-dbms_host"><code class="source">dbms_host</code></a> parameter on either the port given by the <a href="#config-dbms_port"><code class="source">dbms_port</code></a> parameter or the default MySQL port 3306.  Possible causes include: </p>

<ul>

  <li>The MySQL server is down.</li>

  <li>The MySQL server is configured to serve on a different port number</li>

</ul>


<h4><a id="error-_mysql.OperationalError-5" name="error-_mysql.OperationalError-5">_mysql.OperationalError: (2005, "Unknown MySQL Server Host '%s' (2)")</a></h4>

<p> The host given by the <a href="#config-dbms_host"><code class="source">dbms_host</code></a> parameter could not be located. </p>


<h4><a id="error-_mysql.OperationalError-6" name="error-_mysql.OperationalError-6">_mysql.OperationalError: (2006, 'MySQL server has gone away')</a></h4>

<p> The connection to the MySQL server has been lost.  The replicator
will recover when the server connection is re-established. </p>


<h4><a id="message-Perforce-Error-1" name="message-Perforce-Error-1">Perforce error: Can't create a new user - over license quota</a></h4>

<p> You don't have a license for the replicator.  See <a href="#section-3.2">section 3.2, "Perforce prerequisites"</a>. </p>

<p> This might be because you changed the <a
href="#config-p4_user"><code class="source">p4_user</code></a> parameter
but didn't delete the old userid. </p>


<h4><a id="message-Perforce-Error-2" name="message-Perforce-Error-2">Perforce error: Error detected at line %d. Value for field 'Options' must be one of noallwrite/allwrite,noclobber/clobber,nocompress/compress,unlocked/locked,nomodtime/modtime,normdir/rmdir.</a></h4>

<p> You're using a Perforce client that's incompatible with the Perforce server (for example, you're using a Perforce 2000.2 client to connect to a Perforce 2001.1 server).  Check your setting for the <a href="#config-p4_client_executable"><code class="source">p4_client_executable</code></a> parameter. </p>


<h4><a id="message-Perforce-Error-3" name="message-Perforce-Error-3">Perforce error: Error detected at line %d.  Value for field '%s' must be one of %s.</a></h4>

<p> The replicator is trying to replicate an issue that's has a
selection that isn't valid in Perforce. </p>

<p> This can happen if you've added an option to a field in the defect
tracker.  In that case you need to restart the replicator (see <a
href="#section-5.4">section 5.4</a>). </p>


<h4><a id="message-Perforce-Error-4" name="message-Perforce-Error-4"> Perforce error: You don't have permission for this operation </a></h4>

<p> You haven't given the replicator permission to edit the Perforce jobspec.  The replicator needs to have superuser or admin privileges in Perforce in order to set the jobspec.  For instructions, see <a href="#section-5.2.1">section 5.2.1, "Creating a Perforce user for the replicator"</a>. </p>


<h4><a id="error-socket.error-1" name="error-socket.error-1">socket.error: (10222, 'invalid argument')</a></h4>

<p> Your SMTP server may be refusing connections.  Check your <a
href="#config-smtp_server"><code class="source">smtp_server</code></a>
parameter.  Check that your SMTP server is up and running. </p>


<h4><a id="error-socket.error-2" name="error-socket.error-2">socket.error: host not found</a></h4>

<p> You may have specified the wrong hostname for the SMTP server.
Check your <a href="#config-smtp_server"><code
class="source">smtp_server</code></a> parameter.  Check that your SMTP
server is up and running. </p>


<h2><a id="section-A" name="section-A">A. References</a></h2>

<table>

<tr valign="top">

  <td>[<a id="ref-PythonLabs-2002-10-14" name="ref-PythonLabs-2002-10-14" href="http://www.python.org/doc/current/tut/tut.html">PythonLabs 2002-10-14</a>]</td>

  <td>
    "Python Tutorial";
    Guido van Rossum (Fred L. Drake, Jr., editor);
    <a href="http://www.python.org/doc/current/tut/tut.html">PythonLabs</a>;
    2002-10-14;
    &lt;<a href="http://www.python.org/doc/current/tut/tut.html">http://www.python.org/doc/current/tut/tut.html</a>&gt;.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-Bugzilla-2001-08-07" name="ref-Bugzilla-2001-08-07" href="http://www.bugzilla.org/docs214/html/">Bugzilla 2001-08-07</a>]</td>

  <td>
    "The Bugzilla Guide" (for Bugzilla 2.14);
    <a href="mailto:barnboy@trilobyte.net">Matthew P Barnson</a>;
    2001-08-07.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-GDR-2001-11-14" name="ref-GDR-2001-11-14" href="../aag/index.html">GDR 2001-11-14</a>]</td>

  <td>
    "Perforce Defect Tracking Integration Advanced Administrator's Guide";
    <a href="mailto:gdr@ravenbrook.com">Gareth Rees</a>;
    <a href="http://www.ravenbrook.com/">Ravenbrook Limited</a>;
    2001-11-14.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-MySQL-2003-04-03" name="ref-MySQL-2003-04-03" href="http://www.ravenbrook.com/project/p4dti/import/2003-04-03/MySQL-3.23.20-Reference.html">MySQL 2003-04-03</a>]</td>

  <td>
    "MySQL Reference Manual for version 4.1.0-alpha";
    <a href="http://www.mysql.com/">MySQL</a>;
    2003-04-03.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-Perforce-2007-05-21a" name="ref-Perforce-2007-05-21a" href="http://www.perforce.com/perforce/doc.072/manuals/p4guide/">Perforce 2007-05-21a</a>]</td>

  <td>
    "Perforce 2007.2 User's Guide";
    <a href="http://www.perforce.com/">Perforce Software</a>;
    2007-05-21;
    &lt;<a href="http://www.perforce.com/perforce/doc.072/manuals/p4guide/">http://www.perforce.com/perforce/doc.072/manuals/p4guide/</a>&gt;, &lt;<a href="http://www.perforce.com/perforce/doc.072/manuals/p4guide/p4guide.pdf">http://www.perforce.com/perforce/doc.072/manuals/p4guide/p4guide.pdf</a>&gt;.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-Perforce-2007-05-21b" name="ref-Perforce-2007-05-21b" href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">Perforce 2007-05-21b</a>]</td>

  <td>
    "Perforce 2007.2 System Administrator's Guide";
    <a href="http://www.perforce.com/">Perforce Software</a>;
    2007-05-21;
    &lt;<a
    href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/">http://www.perforce.com/perforce/doc.072/manuals/p4sag/</a>&gt;,
    &lt;<a
    href="http://www.perforce.com/perforce/doc.072/manuals/p4sag/p4sag.pdf">http://www.perforce.com/perforce/doc.072
    /manuals/p4sag/p4sag.pdf</a>&gt;.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-Perforce-2007-05-21c" name="ref-Perforce-2007-05-21c" href="http://www.perforce.com/perforce/doc.072/manuals/cmdref/">Perforce 2007-05-21c</a>]</td>

  <td>
    "Perforce 2007.2 Command Reference";
    <a href="http://www.perforce.com/">Perforce Software</a>;
    2007-05-21;
    &lt;<a
    href="http://www.perforce.com/perforce/doc.072/manuals/cmdref/">http://www.perforce.com/perforce/doc.072/manuals/cmdref/</a>&gt;,
    &lt;<a
    href="http://www.perforce.com/perforce/doc.072/manuals/cmdref/cmdref.pdf">http://www.perforce.com/perforce/doc.072
    /manuals/cmdref/cmdref.pdf</a>&gt;.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-Perforce-2007-05-21d" name="ref-Perforce-2007-05-21d" href="http://www.perforce.com/perforce/doc.072/manuals/p4web/">Perforce 2007-05-21d</a>]</td>

  <td>
    "Perforce 2007.2: How to Use P4Web";
    <a href="http://www.perforce.com/">Perforce Software</a>;
    2007-05-21;
    &lt;<a
    href="http://www.perforce.com/perforce/doc.072/manuals/p4web/">http://www.perforce.com/perforce/doc.072/manuals/p4web/</a>&gt;.</td>

</tr>

<tr valign="top">

  <td>[<a id="ref-RB-2000-08-10" name="ref-RB-2000-08-10" href="../ug/index.html">RB 2000-08-10</a>]</td>

  <td>
    "Perforce Defect Tracking Integration User's Guide";
    <a href="mailto:rb@ravenbrook.com">Richard Brooksby</a>;
    <a href="http://www.ravenbrook.com/">Ravenbrook Limited</a>;
    2000-08-10.
  </td>

</tr>

<tr valign="top">

  <td>[<a id="ref-GDR-2000-10-16" name="ref-GDR-2000-10-16" href="http://www.ravenbrook.com/project/p4dti/version/2.4/manual/ig/">GDR 2000-10-16</a>]</td>

  <td>
    "Perforce Defect Tracking Integration Integrator's Guide";
    <a href="mailto:gdr@ravenbrook.com">Gareth Rees</a>;
    <a href="http://www.ravenbrook.com/">Ravenbrook Limited</a>;
    2000-10-16.
  </td>

</tr>

</table>


<h2><a id="section-B" name="section-B">B. Document History</a></h2>

<table>

<tr valign="top">

  <td>2000-08-10</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Created placeholder.</td>

</tr>

<tr valign="top">

  <td>2000-09-11</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added instructions for demonstrating the integration and notes on
  version 0.2.</td>

</tr>

<tr valign="top">

  <td>2000-09-20</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Replaced demo instructions with full documentation outline from documentation plan.</td>

</tr>

<tr valign="top">

  <td>2000-10-15</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Added installation and uninstallation sections, and other sections discussed in [RB 2000-10-07].  Removed parts specific to Ravenbrook Information System.</td>

</tr>

<tr valign="top">

  <td>2000-10-16</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Merged with master sources and GDR's demonstration instructions for version 0.2.  More edits required to make this consistent with the master sources.</td>

</tr>

<tr valign="top">

  <td>2000-10-19</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Updated to fix defects in release 0.3.1 [<a
  href="http://www.ravenbrook.com/project/p4dti/doc/2000-10-17/release-0.3.1-test-report/">GDR
  2000-10-17a</a>] and release 0.3.2 [<a
  href="http://www.ravenbrook.com/project/p4dti/doc/2000-10-18/release-0.3.2-test-report/">RB
  2000-10-18b</a>].</td>

</tr>

<tr valign="top">

  <td>2000-11-25</td>

  <td><a href="mailto:lmb@ravenbrook.com">LMB</a></td>

  <td>Removed "system" from title. Made lots of minor formatting and transition
  edits. Moved Glossary to end of document. Reorganized Section 4.</td>

</tr>

<tr valign="top">

  <td>2000-11-26</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td> Improved prerequisites section.  Added draft Bugzilla prerequisites.  Formatted troubleshooting section.  Updated version 0.3 references to version 0.4. </td>

</tr>

<tr valign="top">

  <td>2000-11-27</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Added readership.  Removed some false statements.</td>

</tr>

<tr valign="top">

  <td>2000-11-29</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Revised section 5 (configuration) to explain how to use the automatic configuration engine for TeamTrack.  Moved material from sections 4 and 5 to make an appendix E for advanced configuration.  Added section 4.6, a placeholder that will describe how to create a Perforce user for the replicator.  The integration with TeamTrack now requires Python 2.0.</td>

</tr>

<tr valign="top">

  <td>2000-11-29</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Corrected overview and improved replicator diagram.  Changed prerequisites to point at Perforce 2000.2 beta release.  Added proper text to Bugzilla prerequisites section.  Cross-referenced to User's Guide.  </td>

</tr>

<tr valign="top">

  <td>2000-11-29</td>

  <td><a href="mailto:lmb@ravenbrook.com">LMB</a></td>

  <td>Changed "&mdash;" to "--" because the former doesn't display properly in Netscape.  Made some minor edits in Sections 1-3.</td>

</tr>

<tr valign="top">

  <td>2000-11-30</td>

  <td><a href="mailto:lmb@ravenbrook.com">LMB</a></td>

  <td>Corrected figure numbers in the text that were off by one. Finished editing the <abbr title="Administrator's Guide">AG</abbr>. Swapped round Sections D and E. Searched the doc for "dfn" tags and incorporated those terms into the glossary. Deleted the list in Section 4.1 and folded its single entry into the preceding sentence. Added a short note to Section 4.4 to the effect that if you're using IIS, you don't need to stop and restart the TeamTrack server.  Added a note to Section 4.6 that we need to tell admins to make the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> user a Perforce super user and add it to the "p4 protect" table if they're using it.</td>

</tr>

<tr valign="top">

  <td>2000-11-30</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Added instructions to upgrade users Perforce clients and to stop using TeamShare SourceBridge.  Told the administrator to check the Windows event log when things go wrong, because the TeamShare <abbr title="Application Programmer Interface">API</abbr> doesn't tell the replicator about errors.</td>

</tr>

<tr valign="top">

  <td>2000-11-30</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td> Added comments to the example jobspec in section D.2, and fixed
  the formatting.  Added note saying that you may not have a field
  called "code".  Listed the TeamTrack workflows that won't work well.
  Wrote advice on how to configure the integration.  Added the <code
  class="source">changelist_url</code> configuration parameter.</td>

</tr>

<tr valign="top">

  <td>2000-12-01</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td> Moved TeamTrack and Bugzilla configuration sections into the Configuration chapter, after the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> configuration instructions.  Added basic Linux installation instructions.  Rewrote sections of the configuration instructions to go with the new flow.  Deleted section on switching TeamTrack databases.  Updated registry editing and Team Track privilege instructions.  Added instructions for creating a Perforce user for the replicator.  Explained multiple transition limitation.  Updated screenshots. </td>

</tr>

<tr valign="top">

  <td>2000-12-04</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Made list of configuration parameters in <a href="#section-5.2">section  5.2</a> consistent with the configuration file (by alphabetizing both lists).  Added missing configuration parameter <code class="source">closed_state</code>.  Added note in section 5.2 about checking the configuration.</td>

</tr>

<tr valign="top">

  <td>2000-12-05</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td> Changed figures to use "div" tags in line with the user manual and to allow more flexible use of material in figures.  Added basic notes on Bugzilla configuration (more to come). </td>

</tr>

<tr valign="top">

  <td>2000-12-06</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td>Added section 2.3 about supported platform configurations.</td>

</tr>

<tr valign="top">

  <td>2000-12-07</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Advised admin to make e-mail addresses or userids the same in TeamTrack and Perforce.  Advised admin to restart when users are added or changed.</td>

</tr>

<tr valign="top">

  <td>2000-12-07</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td> Removed "TeamTrack only" notice from "replicated_fields" configuration parameter heading. </td>

</tr>

<tr valign="top">

  <td>2000-12-08</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td> Documented translation of "ignore" state.  Improved advice about what to do with a field called "code".  Fixed table of contents. </td>

</tr>

<tr valign="top">

  <td>2000-12-08</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td> Documented <code class="command">refresh_perforce.py</code>. </td>

</tr>

<tr valign="top">

  <td>2000-12-08</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td> Documented translation of "ignore" state.  Improved advice about what to do with a field called "code".  Fixed table of contents. </td>

</tr>

<tr valign="top">

  <td>2000-12-08</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td> Documented <code class="command">refresh_perforce.py</code>. </td>

</tr>

<tr valign="top">

  <td>2000-12-08</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td> Brought configuration section 5.2 up to date with Bugzilla configurator (see <a href="http://www.ravenbrook.com/project/p4dti/issue/job000115/">job000115</a>). </td>

</tr>

<tr valign="top">

  <td>2000-12-08</td>

  <td><a href="mailto:rb@ravenbrook.com">RB</a></td>

  <td> Updated to match unified configuration file and related re-organization of sources. </td>

</tr>

<tr valign="top">

  <td>2000-12-11</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Noted that the <a href="#config-changelist_url"><code class="source">changelist_url</code></a> configuration parameter must be suitable for passing to <code class="source">sprintf()</code>.</td>

</tr>

<tr valign="top">

  <td> 2000-12-13 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Updated for version 0.5 to cover Bugzilla supported platforms, configurations, and known issues.  Added changelist_url for use with P4Web. </td>

</tr>

<tr valign="top">

  <td> 2000-12-13 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Moving the Python 1.5.2 sources and Linux <abbr title="Red Hat Package Manager">RPM</abbr> to the project imports.  </td>

</tr>

<tr valign="top">

  <td> 2000-12-15 </td>

  <td> <a href="mailto:nb@ravenbrook.com">NB</a> </td>

  <td> Added verbose configuration item. </td>

</tr>

<tr valign="top">

  <td> 2000-12-15 </td>

  <td> <a href="mailto:nb@ravenbrook.com">NB</a> </td>

  <td> Added more chat about bugzilla_user. </td>

</tr>

<tr valign="top">

  <td> 2000-12-15 </td>

  <td> <a href="mailto:nb@ravenbrook.com">NB</a> </td>

  <td> More about e-mail addresses, python script names, and deleting jobs. </td>

</tr>

<tr valign="top">

  <td> 2000-12-22 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Started improving the manual as agreed in e-mail from RB (Documentation preparation meeting with LMB, 2000-12-20). </td>

</tr>

<tr valign="top">

  <td> 2001-01-01 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Continued improving the manual as agreed in e-mail from RB, modulo deleting things (Documentation preparation meeting with LMB, 2000-12-20). Removed spaces around em-dashes as per "Read Me First!" </td>

</tr>

<tr valign="top">

  <td>2001-01-02</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>The recommendation for administrator experience (<a href="#section-3">section 3</a>) is more realistic.  Moved text from Appendix D to the Integrator's Guide, and replaced with a reference.  Replaced "company.com" with "company.domain" since the former exists.  Fixed typos and improved wording to fix defects recorded in [<a href="http://www.ravenbrook.com/project/p4dti/doc/2000-12-08/release-0.4.2-test-report/">GDR 2000-12-08b</a>], [<a href="http://www.ravenbrook.com/project/p4dti/doc/2000-12-08/release-0.4.2-test-report-2/">GDR 2000-12-08c</a>], and [<a href="http://www.ravenbrook.com/project/p4dti/doc/2000-12-31/release-0.4.2-test-report/">GDR 2000-12-09</a>].  Made cross-references consistent.  Added two error messages to section 13.2.  Added figures 5 and 6 showing example log output.  Added section 5.4.3 about providing field descriptions.</td>

</tr>

<tr valign="top">

  <td> 2001-01-02 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Merged GDR's changes to master manuals with this branch.  Got about two-thirds of the way through a heavy copyedit. </td>

</tr>

<tr valign="top">

  <td> 2001-01-03 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Made some changes suggested by GDR. Finished copyedit; noticed a number of things I didn't catch in the copyedit, so I'm sure there are other problems. Verified links.  Indicated which comments I thought had been dealt with, in case GDR has time to work on this document tomorrow.  Did a once-over in IE5 to make sure I didn't break anything too badly in the last two days. </td>

</tr>

<tr valign="top">

  <td> 2001-01-05 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Dealt with about half of the changes that TC@perforce suggested. </td>

</tr>

<tr valign="top">

  <td> 2001-01-06 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Procedurized and listed everything, as per TC@perforce's suggestions. </td>

</tr>

<tr valign="top">

  <td> 2001-01-07 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Edited references. Replaced Section 5.3.3. </td>

</tr>

<tr valign="top">

  <td> 2001-01-07 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Removed extraneous title material and Sections A and B. Removed comments and sent them in an e-mail to p4dti-staff.  Did final copyedit and finished prepping manual to send to TC@perforce. </td>

</tr>

<tr valign="top">

  <td> 2001-01-20 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Incorporated TC's handwritten edits. Cut lots of stuff out of the glossary. </td>

</tr>

<tr valign="top">

  <td> 2001-01-21 </td>

  <td> <a href="mailto:lmb@ravenbrook.com">LMB</a> </td>

  <td> Re-added author, date, and other title material, and Sections A and B. Added comments on what I'd been doing to the manual in the interim (not much). Edited some new material from GDR. As per GDR's e-mail of 2001-01-18, point 5, deleted Section C and moved the material in Section D to Section 5.3.3. Fixed XREFS to Section 5; checked XREFS to Sections 12, 13, C, and D. Added material on when you might want to refresh jobs. Edited Section 10 slightly. Checked that procedure lead-ins and lists meet TC's specifications. Copied in Nick's changes to the info on patching Bugzilla and to the closed_state and replicated_fields parameters.  Deleted mentions of bugzilla_user. Corrected internal XREFS. Copied over information on log files from master sources.  Ran the spelling checker. </td>

</tr>

<tr valign="top">

  <td>2001-01-22</td>

  <td><a href="mailto:lmb@ravenbrook.com">LMB</a></td>

  <td> As per TC@perforce's request and GDR's instructions, added menu command for how to start the TeamTrack Administrator from Windows. Added upgrade instructions to Section 4. </td>

</tr>

<tr valign="top">

  <td>2001-01-29</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added <a href="#config-bugzilla_directory"><code class="source">bugzilla_directory</code></a> configuration parameter.</td>

</tr>

<tr valign="top">

  <td> 2001-02-01 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Updated references to Perforce manuals to version 2000.2.  Added steps to section 10, "Uninstalling the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>", to undo all installation steps.  Added missing information to section 9, "Maintaining the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>", and clarified some of the existing instructions. </td>

</tr>

<tr valign="top">

  <td> 2001-02-02 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Implemented paper review comments of 2001-01-25 by TC@perforce. </td>

</tr>

<tr valign="top">

  <td>2001-02-12</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added <a href="#config-start_date"><code class="source">start_date</code></a> configuration parameter.  Renamed <code class="filename">refresh_perforce.py</code> to <code class="filename">refresh.py</code>.</td>

</tr>

<tr valign="top">

  <td>2001-02-13</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added note about security of jobs.  Added socket.error error message to section 11.2.  Alphabetized messages in section 11.2.  Added note about "localhost" not working as a value for the teamtrack_server configuration parameter.  Indicated that administrator_address and smtp_server can be None.</td>

</tr>

<tr valign="top">

  <td> 2001-02-14 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Added Linux <abbr title="Red Hat Package Manager">RPM</abbr> instructions. </td>

</tr>

<tr valign="top">

  <td> 2001-02-15 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Fixed "zcat" to "gunzip -c" to fool-proof unpacking. </td>

</tr>

<tr valign="top">

  <td> 2001-02-16 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Added brief instructions for starting the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> automatically. </td>

</tr>

<tr valign="top">

  <td> 2001-02-16 </td>

  <td> <a href="mailto:nb@ravenbrook.com">NB</a> </td>

  <td> Added section 6.1, on migrating sets of issues.  Also add some poll_period and start_date references. </td>

</tr>

<tr valign="top">

  <td>2001-02-21</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Documented <code class="filename">p4dti.reg</code> in section 5.3.1.</td>

</tr>

<tr valign="top">

  <td>2001-02-22</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Documented MySQLdb and MySQL versions in section 3.4.1.</td>

</tr>

<tr valign="top">

  <td>2001-02-22</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Gave instructions in section 11.1 on identifying the release that you're using.  Added "Can't create a new user - over license quota" to error messages in section 11.2.  Wrote section 6.2 on migrating from Perforce jobs.</td>

</tr>

<tr valign="top">

  <td>2001-02-26</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added Bugzilla-related errors to section 11.2.</td>

</tr>

<tr valign="top">

  <td>2001-02-27</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Alphabetized the list of error messages in section 11.2.  Gave full error messages, including prefixes, for each error.  Improved error descriptions.</td>

</tr>

<tr valign="top">

  <td> 2001-03-02 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Added missing contents entries.  Fixed some HTML errors and tidied up some other HTML.  Transferred copyright to Perforce under their license.  Added section on advanced configuration. </td>

</tr>

<tr valign="top">

  <td>2001-03-02</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Removed section 9.3 on tracking down TeamTrack errors section, since it's redundant with section 11.2.</td>

</tr>

<tr valign="top">

  <td> 2001-03-05 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Added e-mail messages to the list of things we'd like in bug reports.  Added some missing "abbr" tags. </td>

</tr>

<tr valign="top">

  <td>2001-03-13</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added message ids to the messages in section 11.2; moved messages without ids in section 11.3.  Added some missing error messages.  Removed <code class="source">verbose</code> parameter; added <code class="source">log_level</code> parameter.  Alphabetized section 5.1.</td>

</tr>

<tr valign="top">

  <td>2001-03-16</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Changed "daemon license" to "background user license" for consistency with Perforce's own terminology.  Background user licenses are available from Perforce Customer Service, not Technical Support.</td>

</tr>

<tr valign="top">

  <td>2001-03-16</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added text for messages 105-117, 200-209, 314, 315.</td>

</tr>

<tr valign="top">

  <td> 2001-04-11 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Updated version to 1.1. </td>

</tr>

<tr valign="top">

  <td> 2001-04-20 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Fixed reference to Bugzilla download at info.ravenbrook.com to point to www.ravenbrook.com. </td>

</tr>

<tr valign="top">

  <td>2001-05-17</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Removed occurrences of messages 844-847, 607-612 from example replicator output (not produced any more).</td>

</tr>

<tr valign="top">

  <td>2001-05-23</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Provided link to online support information.</td>

</tr>

<tr valign="top">

  <td>2001-05-24</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Updated for Bugzilla 2.12.</td>

</tr>

<tr valign="top">

  <td>2001-07-03</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added <code class="source">teamtrack_version</code> configuration parameter. Added error messages from the TeamTrack 5.0 API and error message from the TeamTrack 4.5 API when connecting to a TeamTrack 5.0 server. </td>

</tr>

<tr valign="top">

  <td>2001-07-09</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Updated TeamTrack screen shots to version 5.0.</td>

</tr>

<tr valign="top">

  <td>2001-07-09</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td><abbr title="Red Hat Package Manager">RPM</abbr> users should use the stop script to stop the replicator.</td>

</tr>

<tr valign="top">

  <td>2001-07-09</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added job_url config parameter.</td>

</tr>

<tr valign="top">

  <td>2001-07-14</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Updated references to Perforce manuals to 2001.1, since we now support that version.</td>

</tr>

<tr valign="top">

  <td>2001-07-15</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Explained how to set up an integration without being connected to a network.</td>

</tr>

<tr valign="top">

  <td>2001-07-17</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added more error messages to troubleshooting section.</td>

</tr>

<tr valign="top">

  <td>2001-07-24</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>The <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> doesn't support TeamTrack on a secure web server.  Added more troubleshooting advice for TeamTrack errors.</td>

</tr>

<tr valign="top">

  <td>2001-07-25</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Changed restarting instructions: Bugzilla users don't need to restart the replicator when adding a new user.</td>

</tr>

<tr valign="top">

  <td>2001-07-25</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>The replicator user needs submit, update and transition privileges in TeamTrack 5.0.</td>

</tr>

<tr valign="top">

  <td>2001-07-28</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Reordered section 5.1 so that configuration parameters appear in the same order as in config.py.</td>

</tr>

<tr valign="top">

  <td>2001-07-31</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added error from incompatibility between Perforce client and server.</td>

</tr>

<tr valign="top">

  <td>2001-08-07</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>No need to restart the TeamTrack integration when you add a user.</td>

</tr>

<tr valign="top">

  <td>2001-09-03</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added Bugzilla 2.14.</td>

</tr>

<tr valign="top">

  <td>2001-09-12</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added <a href="#config-use_windows_event_log"><code class="source">use_windows_event_log</code></a> configuration parameter and prerequisite.</td>

</tr>

<tr valign="top">

  <td>2001-09-13</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added TeamTrack error message "SOCKET_READ_ERROR: Authentication Failed. No user information." to troubleshooting section.</td>

</tr>

<tr valign="top">

  <td>2001-09-26</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added section on limitations of the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>.</td>

</tr>

<tr valign="top">

  <td>2001-10-04</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Improved description of workflows that don't work well with the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr>. Added table of supported field types.</td>

</tr>

<tr valign="top">

  <td>2001-10-07</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added <a href="#config-use_perforce_jobnames"><code class="source">use_perforce_jobnames</code></a> parameter.</td>

</tr>

<tr valign="top">

  <td>2001-10-18</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added troubleshooting advice for messages 123, 127, 615, 618, and 619.</td>

</tr>

<tr valign="top">

  <td>2001-09-23</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added new command <code class="filename">poll.py</code> and table of commands.</td>

</tr>

<tr valign="top">

  <td>2001-10-25</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Improved information on supported MySQLdb releases.  Added troubleshooting advice for messages 1005 and 1006.</td>

</tr>

<tr valign="top">

  <td>2001-11-05</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added section on replicating new jobs from Perforce to the defect tracker.</td>

</tr>

<tr valign="top">

  <td>2001-11-08</td>

  <td><a href="mailto:ndl@ravenbrook.com">NDL</a></td>

  <td>Added section 5.6.2, on running as an NT service; cleaned up sections 5.5 and 5.6.</td>

</tr>

<tr valign="top">

  <td>2001-11-14</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Moved material requiring Python programming or knowledge of defect tracker schema to the Advanced Administrator's Guide.</td>

</tr>

<tr valign="top">

  <td>2001-11-19</td>

  <td><a href="mailto:ndl@ravenbrook.com">NDL</a></td>

  <td>Message 891 becomes more general. Document message 1017.</td>

</tr>

<tr valign="top">

  <td>2001-11-22</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Documented <code class="source">use_deleted_selections</code> configuration parameter and associated error messages.</td>

</tr>

<tr valign="top">

  <td> 2001-11-22 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Cross-referenced sections on deleting Perforce jobs to the migration section of the AAG. </td>

</tr>

<tr valign="top">

  <td>2001-11-27</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Documented a processmail-related error message that can come up when migrating if you haven't applied the Bugzilla patch.</td>

</tr>

<tr valign="top">

  <td>2001-12-03</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Added remaining error messages to section 11.</td>

</tr>

<tr valign="top">

  <td>2002-01-24</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Noted support for Bugzilla's "emailsuffix" feature.</td>

</tr>

<tr valign="top">

  <td>2002-01-31</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Documented the supported MySQLdb versions.  Changed MySQLdb link from release 0.3.0 to release 0.9.1.</td>

</tr>

<tr valign="top">

  <td>2002-01-31</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added Bugzilla 2.14.1.</td>

</tr>

<tr valign="top">

  <td>2002-02-01</td>

  <td><a href="mailto:gdr@ravenbrook.com">GDR</a></td>

  <td>Noted support for TeamTrack 5.5.</td>

</tr>

<tr valign="top">

  <td>2002-03-14</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Removed support for TeamTrack 5.02.</td>

</tr>

<tr valign="top">

  <td>2002-04-08</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Add _accessible fields to the Bugzilla fields table.</td>

</tr>

<tr valign="top">

  <td>2002-04-09</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Remove extraneous paragraph close tag.</td>

</tr>

<tr valign="top">

  <td>2002-05-06</td>

  <td><a href="mailto:ram@parrus.com">Ram</a></td>

  <td>Added windows notes for Bugzilla software prerequisites.</td>

</tr>

<tr valign="top">

  <td> 2002-06-26 </td>

  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Merged Parrus Technologies' Bugzilla for Windows port into Ravenbrook sources. </td>

</tr>

<tr valign="top">

  <td>2002-10-04</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Add recent Bugzilla releases, and deprecate old defect tracker
  releases.</td>

</tr>

<tr valign="top">

  <td> 2002-10-25 </td>
  
  <td> <a href="mailto:rb@ravenbrook.com">RB</a> </td>

  <td> Brought cross references to manuals and Bugzilla documentation up to date. </td>

</tr>

<tr valign="top">

  <td>2002-12-11</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>One file changed by the Bugzilla patch is called
  doeditparams.cgi, not doeditparams.pl.  Also added note on using
  "patch" on Windows, link to suitable patch utility.  Also added
  "-p1" switch to the patch command line.  Also added link to mx
  RPM.</td>

</tr>

<tr valign="top">

  <td>2002-12-13</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Refer to patch utility for Windows in section 5.4.1.</td>

</tr>

<tr valign="top">

  <td>2003-05-22</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>De-TeamTrack.  Greatly simplify prerequisites section.  Add more
  Bugzilla examples.  Trim References section.</td>

</tr>

<tr valign="top">

  <td>2003-05-30</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Add remarks on messages 927, 928.</td>

</tr>

<tr valign="top">

  <td>2003-08-07</td>

  <td><a href="mailto:drj@ravenbrook.com">DRJ</a></td>

  <td>Improved links to mysql.com</td>

</tr>

<tr valign="top">

  <td>2003-08-21</td>

  <td><a href="mailto:drj@ravenbrook.com">DRJ</a></td>

  <td>Documented new <code class="source">p4_create_config_file</code>
  configuration parameter.</td>

</tr>

<tr valign="top">

  <td>2003-09-25</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Improved documentation of p4_config_file (and changed the name).</td>

</tr>

<tr valign="top">

  <td>2003-09-26</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Add warning about permissions of P4DTI directory.</td>

</tr>

<tr valign="top">

  <td>2003-12-05</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added config items <a
  href="#config-omitted_fields-Bugzilla">omitted_fields</a> and <a
  href="#config-field_names-Bugzilla">field_names</a>, along with
  additional documentation on replicated fields.</td>

</tr>

<tr valign="top">

  <td>2003-12-12</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Add jobspec-extension error messages.</td>

</tr>

<tr valign="top">

  <td>2003-12-12</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Rewrite jobspec and migration stuff to fit config-jobspec functionality.</td>

</tr>

<tr valign="top">

  <td>2003-12-17</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Updated Perforce manual references to 2003.1.</td>

</tr>

<tr valign="top">

  <td>2004-07-06</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Updated for Bugzilla 2.18.</td>

</tr>

<tr valign="top">

  <td>2004-07-14</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added Bugzilla 2.16.6.</td>

</tr>

<tr valign="top">

  <td>2004-07-20</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Add note on Perforce tickets.</td>

</tr>

<tr valign="top">

  <td>2004-08-02</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Updated MySQLdb version support.</td>

</tr>

<tr valign="top">

  <td>2005-01-18</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Added Bugzilla 2.16.8.</td>

</tr>

<tr valign="top">

  <td>2006-05-31</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Updated Bugzilla version support.</td>

</tr>

<tr valign="top">

  <td>2006-06-15</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Add Bugzilla/DB/MySQL.pm to list of patched files.</td>

</tr>

<tr valign="top">

  <td>2006-07-19</td>

  <td><a href="mailto:nb@ravenbrook.com">NB</a></td>

  <td>Removed note on circumstances when Python Windows extensions are required: they are required all the time!</td>

</tr>

</table>


<h2><a id="section-C" name="section-C">C. Glossary</a></h2>

<table>

<tr valign="top">

  <td><a id="term-changelist" name="term-changelist" href="#term-changelist">changelist</a></td>

  <td> An atomic change transaction in Perforce. </td>

</tr>

<tr valign="top">

  <td>
    <a id="term-background-user-license" name="term-background-user-license" href="#term-background-user-license">background user license</a><br />
    <a id="term-daemon-license" name="term-daemon-license" href="#term-daemon-license">daemon license</a>
  </td>

  <td> A license for a process rather than a person. </td>

</tr>

<tr valign="top">

  <td><a id="term-fix" name="term-fix" href="#term-fix">fix</a></td>

  <td> A link between a job and a changelist. </td>

</tr>

<tr valign="top">

  <td><a id="term-issue" name="term-issue" href="#term-issue">issue</a></td>

  <td> A unit of work tracked by the defect tracker, for example, a bug, a change request, or an enhancement request. </td>

</tr>

<tr valign="top">

  <td><a id="term-job" name="term-job" href="#term-job">job</a></td>

  <td> A unit of work tracked by Perforce. </td>

</tr>

<tr valign="top">

  <td><a id="term-replicator" name="term-replicator" href="#term-replicator">replicator</a></td>

  <td> A process that copies (replicates) data between a defect tracker and a Perforce server in order to keep each one up to date with changes made in the other. Replication allows developers to do their routine defect resolution work entirely from their Perforce client, without needing to use the defect tracker's interface. It also allows developers to relate their changes to defect tracking issues. </td>

</tr>

<tr valign="top">

  <td><a id="term-workflow" name="term-workflow" href="#term-workflow">workflow</a></td>

  <td> A set of rules that control who can do what to which issues. </td>

</tr>

</table>


<h2><a id="section-D" name="section-D">D. Table of commands</a></h2>

<table border="1" cellspacing="0" cellpadding="5">

<tr valign="top">

  <th>Command</th>

  <th>Description</th>

  <th>Reference</th>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;check.py</code></td>

  <td>Check that the defect tracker database is consistent with the
  Perforce jobs and fixes, and report any inconsistencies.</td>

  <td><a href="#section-7.3">7.3</a></td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;check_jobs.py</code></td>

  <td>Check that Perforce jobs are consistent with the Perforce
  jobspec.</td>

  <td>[<a title="Perforce Defect Tracking Integration Advanced Administrator's Guide" href="../aag/index.html#section-4.5">GDR 2001-11-14, 4.5</a>]</td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;check_jobspec.py</code></td>

  <td>Check that the Perforce jobspec is consistent with the P4DTI
  configuration.</td>

  <td><a href="#section-5.2.3">5.2.3</a></td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;extend_jobspec.py <i>--force</i></code></td>

  <td>Add fields to the Perforce jobspec to support replication.  With
  <code class="command"><i>--force</i></code>, also modify
  specification of jobspec fields.</td>

  <td><a href="#section-5.2.3">5.2.3</a></td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;migrate.py</code></td>

  <td>Migrate Perforce jobs to defect tracker issues.</td>

  <td>[<a title="Perforce Defect Tracking Integration Advanced Administrator's Guide" href="../aag/index.html#section-4.10">GDR 2001-11-14, 4.10</a>]</td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;migrate_users.py</code></td>

  <td>Create defect tracker users corresponding to Perforce users.</td>

  <td>[<a title="Perforce Defect Tracking Integration Advanced Administrator's Guide" href="../aag/index.html#section-4.4">GDR 2001-11-14, 4.4</a>]</td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;poll.py</code></td>

  <td>Poll the defect tracker and Perforce for changes, replicate those
  changes, then stop.</td>

  <td><a href="#section-7.1">7.1</a></td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;refresh.py</code></td>

  <td>Copy all the replicated issues from the defect tracker to
  Perforce, overwriting Perforce jobs.  For use when you change
  configuration parameters such as <a
  href="#config-replicated_fields-Bugzilla"><code
  class="source">replicated_fields</code></a> or <a
  href="#config-start_date"><code class="source">start_date</code></a>.</td>

  <td><a href="#section-9.2">9.2</a></td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;run.py</code></td>

  <td>Run the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> replicator.</td>

  <td><a href="#section-5.4">5.4</a></td>

</tr>

<tr valign="top">

  <td><code class="command">python&nbsp;service.py&nbsp;<i>[argument]</i></code></td>

  <td>Manage the <abbr title="Perforce Defect Tracking Integration">P4DTI</abbr> replicator as a Windows NT Service.  With no argument, installs the service. Otherwise specify one of: <code class="command">start</code>, <code class="command">stop</code> or <code class="command">remove</code>.</td>

  <td><a href="#section-5.5.2">5.5.2</a></td>

</tr>

</table>


<hr />

<p> <small>This document is copyright &copy; 2001 Perforce Software, Inc.  All rights reserved.</small> </p>

<p> <small>Redistribution and use of this document in any form, with or without modification, is permitted provided that redistributions of this document retain the above copyright notice, this condition and the following disclaimer.</small> </p>

<p> <small> <strong> This document is provided by the copyright holders and contributors "as is" and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed. In no event shall the copyright holders and contributors be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this document, even if advised of the possibility of such damage. </strong> </small> </p>

</body>

</html>
